import{i as Ii,f as Ni,h as nn,j as Ri,k as Qe,s as ve,l as te,n as L,e as ut,m as Pe,r as pn,p as Wn,q as Fe,o as ji}from"../chunks/scheduler.ceb96720.js";import{p as ke,t as $,b as Ee,d as T,S as me,i as ge,y as _e,z as be,j as B,f as w,A as ne,a as D,e as j,H as Ke,B as Xe,k as N,x as O,C as ct,D as je,r as ue,u as fe,l as Et,v as de,w as pe,m as Te,n as Oe,g as H,s as oe,h as z,c as ae,E as Ue,F as nt,o as Be,G as qn,I as Hi}from"../chunks/index.ee24464c.js";import{j as ri}from"../chunks/singletons.5771db93.js";import{w as $n}from"../chunks/index.7184f1a5.js";import{g as Mn,l as zi,s as Fi}from"../chunks/stores.645299d0.js";import{e as he}from"../chunks/each.e59479a4.js";const Ui=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function cn(t,e){const n=e.token={};function r(i,o,a,s){if(e.token!==n)return;e.resolved=s;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=s);const u=i&&(e.current=i)(l);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,f)=>{f!==o&&d&&(ke(),$(d,1,1,()=>{e.blocks[f]===d&&(e.blocks[f]=null)}),Ee())}):e.block.d(1),u.c(),T(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[o]=u),c&&Ri()}if(Ii(t)){const i=Ni();if(t.then(o=>{nn(i),r(e.then,1,e.value,o),nn(null)},o=>{if(nn(i),r(e.catch,2,e.error,o),nn(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function ii(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function Se(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(r[l]=1);for(const l in s)i[l]||(n[l]=s[l],i[l]=1);t[o]=s}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}const Vi=ri("goto"),Wi=ri("before_navigate");function qi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oi={exports:{}};(function(t){(function(e,n,r){if(!e)return;for(var i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l,u=1;u<20;++u)i[111+u]="f"+u;for(u=0;u<=9;++u)i[u+96]=u.toString();function c(v,E,S){if(v.addEventListener){v.addEventListener(E,S,!1);return}v.attachEvent("on"+E,S)}function d(v){if(v.type=="keypress"){var E=String.fromCharCode(v.which);return v.shiftKey||(E=E.toLowerCase()),E}return i[v.which]?i[v.which]:o[v.which]?o[v.which]:String.fromCharCode(v.which).toLowerCase()}function f(v,E){return v.sort().join(",")===E.sort().join(",")}function m(v){var E=[];return v.shiftKey&&E.push("shift"),v.altKey&&E.push("alt"),v.ctrlKey&&E.push("ctrl"),v.metaKey&&E.push("meta"),E}function b(v){if(v.preventDefault){v.preventDefault();return}v.returnValue=!1}function y(v){if(v.stopPropagation){v.stopPropagation();return}v.cancelBubble=!0}function h(v){return v=="shift"||v=="ctrl"||v=="alt"||v=="meta"}function x(){if(!l){l={};for(var v in i)v>95&&v<112||i.hasOwnProperty(v)&&(l[i[v]]=v)}return l}function _(v,E,S){return S||(S=x()[v]?"keydown":"keypress"),S=="keypress"&&E.length&&(S="keydown"),S}function C(v){return v==="+"?["+"]:(v=v.replace(/\+{2}/g,"+plus"),v.split("+"))}function p(v,E){var S,I,A,q=[];for(S=C(v),A=0;A<S.length;++A)I=S[A],s[I]&&(I=s[I]),E&&E!="keypress"&&a[I]&&(I=a[I],q.push("shift")),h(I)&&q.push(I);return E=_(I,q,E),{key:I,modifiers:q,action:E}}function P(v,E){return v===null||v===n?!1:v===E?!0:P(v.parentNode,E)}function g(v){var E=this;if(v=v||n,!(E instanceof g))return new g(v);E.target=v,E._callbacks={},E._directMap={};var S={},I,A=!1,q=!1,U=!1;function V(R){R=R||{};var W=!1,Y;for(Y in S){if(R[Y]){W=!0;continue}S[Y]=0}W||(U=!1)}function se(R,W,Y,G,Q,we){var Z,le,Me=[],Ce=Y.type;if(!E._callbacks[R])return[];for(Ce=="keyup"&&h(R)&&(W=[R]),Z=0;Z<E._callbacks[R].length;++Z)if(le=E._callbacks[R][Z],!(!G&&le.seq&&S[le.seq]!=le.level)&&Ce==le.action&&(Ce=="keypress"&&!Y.metaKey&&!Y.ctrlKey||f(W,le.modifiers))){var ot=!G&&le.combo==Q,bt=G&&le.seq==G&&le.level==we;(ot||bt)&&E._callbacks[R].splice(Z,1),Me.push(le)}return Me}function ie(R,W,Y,G){E.stopCallback(W,W.target||W.srcElement,Y,G)||R(W,Y)===!1&&(b(W),y(W))}E._handleKey=function(R,W,Y){var G=se(R,W,Y),Q,we={},Z=0,le=!1;for(Q=0;Q<G.length;++Q)G[Q].seq&&(Z=Math.max(Z,G[Q].level));for(Q=0;Q<G.length;++Q){if(G[Q].seq){if(G[Q].level!=Z)continue;le=!0,we[G[Q].seq]=1,ie(G[Q].callback,Y,G[Q].combo,G[Q].seq);continue}le||ie(G[Q].callback,Y,G[Q].combo)}var Me=Y.type=="keypress"&&q;Y.type==U&&!h(R)&&!Me&&V(we),q=le&&Y.type=="keydown"};function K(R){typeof R.which!="number"&&(R.which=R.keyCode);var W=d(R);if(W){if(R.type=="keyup"&&A===W){A=!1;return}E.handleKey(W,m(R),R)}}function X(){clearTimeout(I),I=setTimeout(V,1e3)}function J(R,W,Y,G){S[R]=0;function Q(Ce){return function(){U=Ce,++S[R],X()}}function we(Ce){ie(Y,Ce,R),G!=="keyup"&&(A=d(Ce)),setTimeout(V,10)}for(var Z=0;Z<W.length;++Z){var le=Z+1===W.length,Me=le?we:Q(G||p(W[Z+1]).action);ye(W[Z],Me,G,R,Z)}}function ye(R,W,Y,G,Q){E._directMap[R+":"+Y]=W,R=R.replace(/\s+/g," ");var we=R.split(" "),Z;if(we.length>1){J(R,we,W,Y);return}Z=p(R,Y),E._callbacks[Z.key]=E._callbacks[Z.key]||[],se(Z.key,Z.modifiers,{type:Z.action},G,R,Q),E._callbacks[Z.key][G?"unshift":"push"]({callback:W,modifiers:Z.modifiers,action:Z.action,seq:G,level:Q,combo:R})}E._bindMultiple=function(R,W,Y){for(var G=0;G<R.length;++G)ye(R[G],W,Y)},c(v,"keypress",K),c(v,"keydown",K),c(v,"keyup",K)}g.prototype.bind=function(v,E,S){var I=this;return v=v instanceof Array?v:[v],I._bindMultiple.call(I,v,E,S),I},g.prototype.unbind=function(v,E){var S=this;return S.bind.call(S,v,function(){},E)},g.prototype.trigger=function(v,E){var S=this;return S._directMap[v+":"+E]&&S._directMap[v+":"+E]({},v),S},g.prototype.reset=function(){var v=this;return v._callbacks={},v._directMap={},v},g.prototype.stopCallback=function(v,E){var S=this;if((" "+E.className+" ").indexOf(" mousetrap ")>-1||P(E,S.target))return!1;if("composedPath"in v&&typeof v.composedPath=="function"){var I=v.composedPath()[0];I!==v.target&&(E=I)}return E.tagName=="INPUT"||E.tagName=="SELECT"||E.tagName=="TEXTAREA"||E.isContentEditable},g.prototype.handleKey=function(){var v=this;return v._handleKey.apply(v,arguments)},g.addKeycodes=function(v){for(var E in v)v.hasOwnProperty(E)&&(i[E]=v[E]);l=null},g.init=function(){var v=g(n);for(var E in v)E.charAt(0)!=="_"&&(g[E]=function(S){return function(){return v[S].apply(v,arguments)}}(E))},g.init(),e.Mousetrap=g,t.exports&&(t.exports=g),typeof r=="function"&&r.amd&&r(function(){return g})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(oi);var Gi=oi.exports;const Yi=qi(Gi);function st(t,e){console.debug("[keybind] binding:",e.keys);const n=new Yi(document.documentElement);return n.bind(e.keys,()=>(console.debug("[keybind] handling:",e.keys),e.f(),!1)),{destroy(){console.debug("[keybind] destorying:",e.keys),n.reset()}}}var Le="top",He="bottom",ze="right",$e="left",Bn="auto",Ut=[Le,He,ze,$e],xt="start",jt="end",Ki="clippingParents",ai="viewport",$t="popper",Xi="reference",Gn=Ut.reduce(function(t,e){return t.concat([e+"-"+xt,e+"-"+jt])},[]),si=[].concat(Ut,[Bn]).reduce(function(t,e){return t.concat([e,e+"-"+xt,e+"-"+jt])},[]),Ji="beforeRead",Qi="read",Zi="afterRead",eo="beforeMain",to="main",no="afterMain",ro="beforeWrite",io="write",oo="afterWrite",ao=[Ji,Qi,Zi,eo,to,no,ro,io,oo];function Ye(t){return t?(t.nodeName||"").toLowerCase():null}function Ie(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _t(t){var e=Ie(t).Element;return t instanceof e||t instanceof Element}function Re(t){var e=Ie(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function In(t){if(typeof ShadowRoot>"u")return!1;var e=Ie(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function so(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Re(o)||!Ye(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function lo(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(l,u){return l[u]="",l},{});!Re(i)||!Ye(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const li={name:"applyStyles",enabled:!0,phase:"write",fn:so,effect:lo,requires:["computeStyles"]};function Ge(t){return t.split("-")[0]}var mt=Math.max,un=Math.min,Ct=Math.round;function On(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ci(){return!/^((?!chrome|android).)*safari/i.test(On())}function Tt(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Re(t)&&(i=t.offsetWidth>0&&Ct(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ct(r.height)/t.offsetHeight||1);var a=_t(t)?Ie(t):window,s=a.visualViewport,l=!ci()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function Nn(t){var e=Tt(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ui(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&In(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function it(t){return Ie(t).getComputedStyle(t)}function co(t){return["table","td","th"].indexOf(Ye(t))>=0}function ft(t){return((_t(t)?t.ownerDocument:t.document)||window.document).documentElement}function hn(t){return Ye(t)==="html"?t:t.assignedSlot||t.parentNode||(In(t)?t.host:null)||ft(t)}function Yn(t){return!Re(t)||it(t).position==="fixed"?null:t.offsetParent}function uo(t){var e=/firefox/i.test(On()),n=/Trident/i.test(On());if(n&&Re(t)){var r=it(t);if(r.position==="fixed")return null}var i=hn(t);for(In(i)&&(i=i.host);Re(i)&&["html","body"].indexOf(Ye(i))<0;){var o=it(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Vt(t){for(var e=Ie(t),n=Yn(t);n&&co(n)&&it(n).position==="static";)n=Yn(n);return n&&(Ye(n)==="html"||Ye(n)==="body"&&it(n).position==="static")?e:n||uo(t)||e}function Rn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Mt(t,e,n){return mt(t,un(e,n))}function fo(t,e,n){var r=Mt(t,e,n);return r>n?n:r}function fi(){return{top:0,right:0,bottom:0,left:0}}function di(t){return Object.assign({},fi(),t)}function pi(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var po=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,di(typeof e!="number"?e:pi(e,Ut))};function ho(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Ge(n.placement),l=Rn(s),u=[$e,ze].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!a)){var d=po(i.padding,n),f=Nn(o),m=l==="y"?Le:$e,b=l==="y"?He:ze,y=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],h=a[l]-n.rects.reference[l],x=Vt(o),_=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,C=y/2-h/2,p=d[m],P=_-f[c]-d[b],g=_/2-f[c]/2+C,v=Mt(p,g,P),E=l;n.modifiersData[r]=(e={},e[E]=v,e.centerOffset=v-g,e)}}function vo(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||ui(e.elements.popper,i)&&(e.elements.arrow=i))}const mo={name:"arrow",enabled:!0,phase:"main",fn:ho,effect:vo,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ot(t){return t.split("-")[1]}var go={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _o(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ct(n*i)/i||0,y:Ct(r*i)/i||0}}function Kn(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=a.x,m=f===void 0?0:f,b=a.y,y=b===void 0?0:b,h=typeof c=="function"?c({x:m,y}):{x:m,y};m=h.x,y=h.y;var x=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),C=$e,p=Le,P=window;if(u){var g=Vt(n),v="clientHeight",E="clientWidth";if(g===Ie(n)&&(g=ft(n),it(g).position!=="static"&&s==="absolute"&&(v="scrollHeight",E="scrollWidth")),g=g,i===Le||(i===$e||i===ze)&&o===jt){p=He;var S=d&&g===P&&P.visualViewport?P.visualViewport.height:g[v];y-=S-r.height,y*=l?1:-1}if(i===$e||(i===Le||i===He)&&o===jt){C=ze;var I=d&&g===P&&P.visualViewport?P.visualViewport.width:g[E];m-=I-r.width,m*=l?1:-1}}var A=Object.assign({position:s},u&&go),q=c===!0?_o({x:m,y},Ie(n)):{x:m,y};if(m=q.x,y=q.y,l){var U;return Object.assign({},A,(U={},U[p]=_?"0":"",U[C]=x?"0":"",U.transform=(P.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",U))}return Object.assign({},A,(e={},e[p]=_?y+"px":"",e[C]=x?m+"px":"",e.transform="",e))}function bo(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:Ge(e.placement),variation:Ot(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Kn(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Kn(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const yo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bo,data:{}};var rn={passive:!0};function wo(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,l=Ie(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,rn)}),s&&l.addEventListener("resize",n.update,rn),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,rn)}),s&&l.removeEventListener("resize",n.update,rn)}}const ko={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wo,data:{}};var Eo={left:"right",right:"left",bottom:"top",top:"bottom"};function sn(t){return t.replace(/left|right|bottom|top/g,function(e){return Eo[e]})}var xo={start:"end",end:"start"};function Xn(t){return t.replace(/start|end/g,function(e){return xo[e]})}function jn(t){var e=Ie(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Hn(t){return Tt(ft(t)).left+jn(t).scrollLeft}function Co(t,e){var n=Ie(t),r=ft(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=ci();(u||!u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Hn(t),y:l}}function To(t){var e,n=ft(t),r=jn(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=mt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=mt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Hn(t),l=-r.scrollTop;return it(i||n).direction==="rtl"&&(s+=mt(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function zn(t){var e=it(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function hi(t){return["html","body","#document"].indexOf(Ye(t))>=0?t.ownerDocument.body:Re(t)&&zn(t)?t:hi(hn(t))}function Bt(t,e){var n;e===void 0&&(e=[]);var r=hi(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Ie(r),a=i?[o].concat(o.visualViewport||[],zn(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(Bt(hn(a)))}function Pn(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Oo(t,e){var n=Tt(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Jn(t,e,n){return e===ai?Pn(Co(t,n)):_t(e)?Oo(e,n):Pn(To(ft(t)))}function Po(t){var e=Bt(hn(t)),n=["absolute","fixed"].indexOf(it(t).position)>=0,r=n&&Re(t)?Vt(t):t;return _t(r)?e.filter(function(i){return _t(i)&&ui(i,r)&&Ye(i)!=="body"}):[]}function So(t,e,n,r){var i=e==="clippingParents"?Po(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(l,u){var c=Jn(t,u,r);return l.top=mt(c.top,l.top),l.right=un(c.right,l.right),l.bottom=un(c.bottom,l.bottom),l.left=mt(c.left,l.left),l},Jn(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function vi(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ge(r):null,o=r?Ot(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case Le:l={x:a,y:e.y-n.height};break;case He:l={x:a,y:e.y+e.height};break;case ze:l={x:e.x+e.width,y:s};break;case $e:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var u=i?Rn(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case xt:l[u]=l[u]-(e[c]/2-n[c]/2);break;case jt:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Ht(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,l=s===void 0?Ki:s,u=n.rootBoundary,c=u===void 0?ai:u,d=n.elementContext,f=d===void 0?$t:d,m=n.altBoundary,b=m===void 0?!1:m,y=n.padding,h=y===void 0?0:y,x=di(typeof h!="number"?h:pi(h,Ut)),_=f===$t?Xi:$t,C=t.rects.popper,p=t.elements[b?_:f],P=So(_t(p)?p:p.contextElement||ft(t.elements.popper),l,c,a),g=Tt(t.elements.reference),v=vi({reference:g,element:C,strategy:"absolute",placement:i}),E=Pn(Object.assign({},C,v)),S=f===$t?E:g,I={top:P.top-S.top+x.top,bottom:S.bottom-P.bottom+x.bottom,left:P.left-S.left+x.left,right:S.right-P.right+x.right},A=t.modifiersData.offset;if(f===$t&&A){var q=A[i];Object.keys(I).forEach(function(U){var V=[ze,He].indexOf(U)>=0?1:-1,se=[Le,He].indexOf(U)>=0?"y":"x";I[U]+=q[se]*V})}return I}function Do(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?si:l,c=Ot(r),d=c?s?Gn:Gn.filter(function(b){return Ot(b)===c}):Ut,f=d.filter(function(b){return u.indexOf(b)>=0});f.length===0&&(f=d);var m=f.reduce(function(b,y){return b[y]=Ht(t,{placement:y,boundary:i,rootBoundary:o,padding:a})[Ge(y)],b},{});return Object.keys(m).sort(function(b,y){return m[b]-m[y]})}function Ao(t){if(Ge(t)===Bn)return[];var e=sn(t);return[Xn(t),e,Xn(e)]}function Lo(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,b=m===void 0?!0:m,y=n.allowedAutoPlacements,h=e.options.placement,x=Ge(h),_=x===h,C=l||(_||!b?[sn(h)]:Ao(h)),p=[h].concat(C).reduce(function(G,Q){return G.concat(Ge(Q)===Bn?Do(e,{placement:Q,boundary:c,rootBoundary:d,padding:u,flipVariations:b,allowedAutoPlacements:y}):Q)},[]),P=e.rects.reference,g=e.rects.popper,v=new Map,E=!0,S=p[0],I=0;I<p.length;I++){var A=p[I],q=Ge(A),U=Ot(A)===xt,V=[Le,He].indexOf(q)>=0,se=V?"width":"height",ie=Ht(e,{placement:A,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),K=V?U?ze:$e:U?He:Le;P[se]>g[se]&&(K=sn(K));var X=sn(K),J=[];if(o&&J.push(ie[q]<=0),s&&J.push(ie[K]<=0,ie[X]<=0),J.every(function(G){return G})){S=A,E=!1;break}v.set(A,J)}if(E)for(var ye=b?3:1,R=function(Q){var we=p.find(function(Z){var le=v.get(Z);if(le)return le.slice(0,Q).every(function(Me){return Me})});if(we)return S=we,"break"},W=ye;W>0;W--){var Y=R(W);if(Y==="break")break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}}const $o={name:"flip",enabled:!0,phase:"main",fn:Lo,requiresIfExists:["offset"],data:{_skip:!1}};function Qn(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Zn(t){return[Le,ze,He,$e].some(function(e){return t[e]>=0})}function Mo(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=Ht(e,{elementContext:"reference"}),s=Ht(e,{altBoundary:!0}),l=Qn(a,r),u=Qn(s,i,o),c=Zn(l),d=Zn(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const Bo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Mo};function Io(t,e,n){var r=Ge(t),i=[$e,Le].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[$e,ze].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function No(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=si.reduce(function(c,d){return c[d]=Io(d,e.rects,o),c},{}),s=a[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=a}const Ro={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:No};function jo(t){var e=t.state,n=t.name;e.modifiersData[n]=vi({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ho={name:"popperOffsets",enabled:!0,phase:"read",fn:jo,data:{}};function zo(t){return t==="x"?"y":"x"}function Fo(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,b=n.tetherOffset,y=b===void 0?0:b,h=Ht(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),x=Ge(e.placement),_=Ot(e.placement),C=!_,p=Rn(x),P=zo(p),g=e.modifiersData.popperOffsets,v=e.rects.reference,E=e.rects.popper,S=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,I=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),A=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,q={x:0,y:0};if(g){if(o){var U,V=p==="y"?Le:$e,se=p==="y"?He:ze,ie=p==="y"?"height":"width",K=g[p],X=K+h[V],J=K-h[se],ye=m?-E[ie]/2:0,R=_===xt?v[ie]:E[ie],W=_===xt?-E[ie]:-v[ie],Y=e.elements.arrow,G=m&&Y?Nn(Y):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:fi(),we=Q[V],Z=Q[se],le=Mt(0,v[ie],G[ie]),Me=C?v[ie]/2-ye-le-we-I.mainAxis:R-le-we-I.mainAxis,Ce=C?-v[ie]/2+ye+le+Z+I.mainAxis:W+le+Z+I.mainAxis,ot=e.elements.arrow&&Vt(e.elements.arrow),bt=ot?p==="y"?ot.clientTop||0:ot.clientLeft||0:0,Pt=(U=A==null?void 0:A[p])!=null?U:0,qt=K+Me-Pt-bt,Gt=K+Ce-Pt,St=Mt(m?un(X,qt):X,K,m?mt(J,Gt):J);g[p]=St,q[p]=St-K}if(s){var Dt,Yt=p==="x"?Le:$e,Kt=p==="x"?He:ze,Je=g[P],at=P==="y"?"height":"width",At=Je+h[Yt],dt=Je-h[Kt],Lt=[Le,$e].indexOf(x)!==-1,Xt=(Dt=A==null?void 0:A[P])!=null?Dt:0,Jt=Lt?At:Je-v[at]-E[at]-Xt+I.altAxis,Qt=Lt?Je+v[at]+E[at]-Xt-I.altAxis:dt,Zt=m&&Lt?fo(Jt,Je,Qt):Mt(m?Jt:At,Je,m?Qt:dt);g[P]=Zt,q[P]=Zt-Je}e.modifiersData[r]=q}}const Uo={name:"preventOverflow",enabled:!0,phase:"main",fn:Fo,requiresIfExists:["offset"]};function Vo(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Wo(t){return t===Ie(t)||!Re(t)?jn(t):Vo(t)}function qo(t){var e=t.getBoundingClientRect(),n=Ct(e.width)/t.offsetWidth||1,r=Ct(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Go(t,e,n){n===void 0&&(n=!1);var r=Re(e),i=Re(e)&&qo(e),o=ft(e),a=Tt(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ye(e)!=="body"||zn(o))&&(s=Wo(e)),Re(e)?(l=Tt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Hn(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Yo(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function Ko(t){var e=Yo(t);return ao.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Xo(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Jo(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var er={placement:"bottom",modifiers:[],strategy:"absolute"};function tr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Qo(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?er:i;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},er,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(x){var _=typeof x=="function"?x(c.options):x;y(),c.options=Object.assign({},o,c.options,_),c.scrollParents={reference:_t(s)?Bt(s):s.contextElement?Bt(s.contextElement):[],popper:Bt(l)};var C=Ko(Jo([].concat(r,c.options.modifiers)));return c.orderedModifiers=C.filter(function(p){return p.enabled}),b(),m.update()},forceUpdate:function(){if(!f){var x=c.elements,_=x.reference,C=x.popper;if(tr(_,C)){c.rects={reference:Go(_,Vt(C),c.options.strategy==="fixed"),popper:Nn(C)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var p=0;p<c.orderedModifiers.length;p++){if(c.reset===!0){c.reset=!1,p=-1;continue}var P=c.orderedModifiers[p],g=P.fn,v=P.options,E=v===void 0?{}:v,S=P.name;typeof g=="function"&&(c=g({state:c,options:E,name:S,instance:m})||c)}}}},update:Xo(function(){return new Promise(function(h){m.forceUpdate(),h(c)})}),destroy:function(){y(),f=!0}};if(!tr(s,l))return m;m.setOptions(u).then(function(h){!f&&u.onFirstUpdate&&u.onFirstUpdate(h)});function b(){c.orderedModifiers.forEach(function(h){var x=h.name,_=h.options,C=_===void 0?{}:_,p=h.effect;if(typeof p=="function"){var P=p({state:c,name:x,instance:m,options:C}),g=function(){};d.push(P||g)}})}function y(){d.forEach(function(h){return h()}),d=[]}return m}}var Zo=[ko,Ho,yo,li,Ro,$o,Uo,mo,Bo],ea=Qo({defaultModifiers:Zo}),ta="tippy-box",mi="tippy-content",na="tippy-backdrop",gi="tippy-arrow",_i="tippy-svg-arrow",vt={passive:!0,capture:!0},bi=function(){return document.body};function bn(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function Fn(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function yi(t,e){return typeof t=="function"?t.apply(void 0,e):t}function nr(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function ra(t){return t.split(/\s+/).filter(Boolean)}function kt(t){return[].concat(t)}function rr(t,e){t.indexOf(e)===-1&&t.push(e)}function ia(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function oa(t){return t.split("-")[0]}function fn(t){return[].slice.call(t)}function ir(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function It(){return document.createElement("div")}function vn(t){return["Element","Fragment"].some(function(e){return Fn(t,e)})}function aa(t){return Fn(t,"NodeList")}function sa(t){return Fn(t,"MouseEvent")}function la(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function ca(t){return vn(t)?[t]:aa(t)?fn(t):Array.isArray(t)?t:fn(document.querySelectorAll(t))}function yn(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function or(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function ua(t){var e,n=kt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function fa(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,a=i.popperState,s=i.props,l=s.interactiveBorder,u=oa(a.placement),c=a.modifiersData.offset;if(!c)return!0;var d=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,b=u==="left"?c.right.x:0,y=o.top-r+d>l,h=r-o.bottom-f>l,x=o.left-n+m>l,_=n-o.right-b>l;return y||h||x||_})}function wn(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function ar(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var We={isTouch:!1},sr=0;function da(){We.isTouch||(We.isTouch=!0,window.performance&&document.addEventListener("mousemove",wi))}function wi(){var t=performance.now();t-sr<20&&(We.isTouch=!1,document.removeEventListener("mousemove",wi)),sr=t}function pa(){var t=document.activeElement;if(la(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function ha(){document.addEventListener("touchstart",da,vt),window.addEventListener("blur",pa)}var va=typeof window<"u"&&typeof document<"u",ma=va?!!window.msCrypto:!1,ga={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},_a={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ve=Object.assign({appendTo:bi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ga,_a),ba=Object.keys(Ve),ya=function(e){var n=Object.keys(e);n.forEach(function(r){Ve[r]=e[r]})};function ki(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var s;r[o]=t[o]!==void 0?t[o]:(s=Ve[o])!=null?s:a}return r},{});return Object.assign({},t,n)}function wa(t,e){var n=e?Object.keys(ki(Object.assign({},Ve,{plugins:e}))):ba,r=n.reduce(function(i,o){var a=(t.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch{i[o]=a}return i},{});return r}function lr(t,e){var n=Object.assign({},e,{content:yi(e.content,[t])},e.ignoreAttributes?{}:wa(t,e.plugins));return n.aria=Object.assign({},Ve.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var ka=function(){return"innerHTML"};function Sn(t,e){t[ka()]=e}function cr(t){var e=It();return t===!0?e.className=gi:(e.className=_i,vn(t)?e.appendChild(t):Sn(e,t)),e}function ur(t,e){vn(e.content)?(Sn(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Sn(t,e.content):t.textContent=e.content)}function Dn(t){var e=t.firstElementChild,n=fn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(mi)}),arrow:n.find(function(r){return r.classList.contains(gi)||r.classList.contains(_i)}),backdrop:n.find(function(r){return r.classList.contains(na)})}}function Ei(t){var e=It(),n=It();n.className=ta,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=It();r.className=mi,r.setAttribute("data-state","hidden"),ur(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,a){var s=Dn(e),l=s.box,u=s.content,c=s.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&ur(u,t.props),a.arrow?c?o.arrow!==a.arrow&&(l.removeChild(c),l.appendChild(cr(a.arrow))):l.appendChild(cr(a.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}Ei.$$tippy=!0;var Ea=1,on=[],kn=[];function xa(t,e){var n=lr(t,Object.assign({},Ve,ki(ir(e)))),r,i,o,a=!1,s=!1,l=!1,u=!1,c,d,f,m=[],b=nr(qt,n.interactiveDebounce),y,h=Ea++,x=null,_=ia(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:h,reference:t,popper:It(),popperInstance:x,props:n,state:C,plugins:_,clearDelayTimeouts:Jt,setProps:Qt,setContent:Zt,show:Di,hide:Ai,hideWithInteractivity:Li,enable:Lt,disable:Xt,unmount:$i,destroy:Mi};if(!n.render)return p;var P=n.render(p),g=P.popper,v=P.onUpdate;g.setAttribute("data-tippy-root",""),g.id="tippy-"+p.id,p.popper=g,t._tippy=p,g._tippy=p;var E=_.map(function(k){return k.fn(p)}),S=t.hasAttribute("aria-expanded");return ot(),ye(),K(),X("onCreate",[p]),n.showOnCreate&&At(),g.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),g.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&V().addEventListener("mousemove",b)}),p;function I(){var k=p.props.touch;return Array.isArray(k)?k:[k,0]}function A(){return I()[0]==="hold"}function q(){var k;return!!((k=p.props.render)!=null&&k.$$tippy)}function U(){return y||t}function V(){var k=U().parentNode;return k?ua(k):document}function se(){return Dn(g)}function ie(k){return p.state.isMounted&&!p.state.isVisible||We.isTouch||c&&c.type==="focus"?0:bn(p.props.delay,k?0:1,Ve.delay)}function K(k){k===void 0&&(k=!1),g.style.pointerEvents=p.props.interactive&&!k?"":"none",g.style.zIndex=""+p.props.zIndex}function X(k,M,F){if(F===void 0&&(F=!0),E.forEach(function(ee){ee[k]&&ee[k].apply(ee,M)}),F){var re;(re=p.props)[k].apply(re,M)}}function J(){var k=p.props.aria;if(k.content){var M="aria-"+k.content,F=g.id,re=kt(p.props.triggerTarget||t);re.forEach(function(ee){var De=ee.getAttribute(M);if(p.state.isVisible)ee.setAttribute(M,De?De+" "+F:F);else{var Ne=De&&De.replace(F,"").trim();Ne?ee.setAttribute(M,Ne):ee.removeAttribute(M)}})}}function ye(){if(!(S||!p.props.aria.expanded)){var k=kt(p.props.triggerTarget||t);k.forEach(function(M){p.props.interactive?M.setAttribute("aria-expanded",p.state.isVisible&&M===U()?"true":"false"):M.removeAttribute("aria-expanded")})}}function R(){V().removeEventListener("mousemove",b),on=on.filter(function(k){return k!==b})}function W(k){if(!(We.isTouch&&(l||k.type==="mousedown"))){var M=k.composedPath&&k.composedPath()[0]||k.target;if(!(p.props.interactive&&ar(g,M))){if(kt(p.props.triggerTarget||t).some(function(F){return ar(F,M)})){if(We.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else X("onClickOutside",[p,k]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),s=!0,setTimeout(function(){s=!1}),p.state.isMounted||we())}}}function Y(){l=!0}function G(){l=!1}function Q(){var k=V();k.addEventListener("mousedown",W,!0),k.addEventListener("touchend",W,vt),k.addEventListener("touchstart",G,vt),k.addEventListener("touchmove",Y,vt)}function we(){var k=V();k.removeEventListener("mousedown",W,!0),k.removeEventListener("touchend",W,vt),k.removeEventListener("touchstart",G,vt),k.removeEventListener("touchmove",Y,vt)}function Z(k,M){Me(k,function(){!p.state.isVisible&&g.parentNode&&g.parentNode.contains(g)&&M()})}function le(k,M){Me(k,M)}function Me(k,M){var F=se().box;function re(ee){ee.target===F&&(wn(F,"remove",re),M())}if(k===0)return M();wn(F,"remove",d),wn(F,"add",re),d=re}function Ce(k,M,F){F===void 0&&(F=!1);var re=kt(p.props.triggerTarget||t);re.forEach(function(ee){ee.addEventListener(k,M,F),m.push({node:ee,eventType:k,handler:M,options:F})})}function ot(){A()&&(Ce("touchstart",Pt,{passive:!0}),Ce("touchend",Gt,{passive:!0})),ra(p.props.trigger).forEach(function(k){if(k!=="manual")switch(Ce(k,Pt),k){case"mouseenter":Ce("mouseleave",Gt);break;case"focus":Ce(ma?"focusout":"blur",St);break;case"focusin":Ce("focusout",St);break}})}function bt(){m.forEach(function(k){var M=k.node,F=k.eventType,re=k.handler,ee=k.options;M.removeEventListener(F,re,ee)}),m=[]}function Pt(k){var M,F=!1;if(!(!p.state.isEnabled||Dt(k)||s)){var re=((M=c)==null?void 0:M.type)==="focus";c=k,y=k.currentTarget,ye(),!p.state.isVisible&&sa(k)&&on.forEach(function(ee){return ee(k)}),k.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||a)&&p.props.hideOnClick!==!1&&p.state.isVisible?F=!0:At(k),k.type==="click"&&(a=!F),F&&!re&&dt(k)}}function qt(k){var M=k.target,F=U().contains(M)||g.contains(M);if(!(k.type==="mousemove"&&F)){var re=at().concat(g).map(function(ee){var De,Ne=ee._tippy,yt=(De=Ne.popperInstance)==null?void 0:De.state;return yt?{popperRect:ee.getBoundingClientRect(),popperState:yt,props:n}:null}).filter(Boolean);fa(re,k)&&(R(),dt(k))}}function Gt(k){var M=Dt(k)||p.props.trigger.indexOf("click")>=0&&a;if(!M){if(p.props.interactive){p.hideWithInteractivity(k);return}dt(k)}}function St(k){p.props.trigger.indexOf("focusin")<0&&k.target!==U()||p.props.interactive&&k.relatedTarget&&g.contains(k.relatedTarget)||dt(k)}function Dt(k){return We.isTouch?A()!==k.type.indexOf("touch")>=0:!1}function Yt(){Kt();var k=p.props,M=k.popperOptions,F=k.placement,re=k.offset,ee=k.getReferenceClientRect,De=k.moveTransition,Ne=q()?Dn(g).arrow:null,yt=ee?{getBoundingClientRect:ee,contextElement:ee.contextElement||U()}:t,Vn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(en){var wt=en.state;if(q()){var Bi=se(),_n=Bi.box;["placement","reference-hidden","escaped"].forEach(function(tn){tn==="placement"?_n.setAttribute("data-placement",wt.placement):wt.attributes.popper["data-popper-"+tn]?_n.setAttribute("data-"+tn,""):_n.removeAttribute("data-"+tn)}),wt.attributes.popper={}}}},pt=[{name:"offset",options:{offset:re}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},Vn];q()&&Ne&&pt.push({name:"arrow",options:{element:Ne,padding:3}}),pt.push.apply(pt,(M==null?void 0:M.modifiers)||[]),p.popperInstance=ea(yt,g,Object.assign({},M,{placement:F,onFirstUpdate:f,modifiers:pt}))}function Kt(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function Je(){var k=p.props.appendTo,M,F=U();p.props.interactive&&k===bi||k==="parent"?M=F.parentNode:M=yi(k,[F]),M.contains(g)||M.appendChild(g),p.state.isMounted=!0,Yt()}function at(){return fn(g.querySelectorAll("[data-tippy-root]"))}function At(k){p.clearDelayTimeouts(),k&&X("onTrigger",[p,k]),Q();var M=ie(!0),F=I(),re=F[0],ee=F[1];We.isTouch&&re==="hold"&&ee&&(M=ee),M?r=setTimeout(function(){p.show()},M):p.show()}function dt(k){if(p.clearDelayTimeouts(),X("onUntrigger",[p,k]),!p.state.isVisible){we();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(k.type)>=0&&a)){var M=ie(!1);M?i=setTimeout(function(){p.state.isVisible&&p.hide()},M):o=requestAnimationFrame(function(){p.hide()})}}function Lt(){p.state.isEnabled=!0}function Xt(){p.hide(),p.state.isEnabled=!1}function Jt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Qt(k){if(!p.state.isDestroyed){X("onBeforeUpdate",[p,k]),bt();var M=p.props,F=lr(t,Object.assign({},M,ir(k),{ignoreAttributes:!0}));p.props=F,ot(),M.interactiveDebounce!==F.interactiveDebounce&&(R(),b=nr(qt,F.interactiveDebounce)),M.triggerTarget&&!F.triggerTarget?kt(M.triggerTarget).forEach(function(re){re.removeAttribute("aria-expanded")}):F.triggerTarget&&t.removeAttribute("aria-expanded"),ye(),K(),v&&v(M,F),p.popperInstance&&(Yt(),at().forEach(function(re){requestAnimationFrame(re._tippy.popperInstance.forceUpdate)})),X("onAfterUpdate",[p,k])}}function Zt(k){p.setProps({content:k})}function Di(){var k=p.state.isVisible,M=p.state.isDestroyed,F=!p.state.isEnabled,re=We.isTouch&&!p.props.touch,ee=bn(p.props.duration,0,Ve.duration);if(!(k||M||F||re)&&!U().hasAttribute("disabled")&&(X("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,q()&&(g.style.visibility="visible"),K(),Q(),p.state.isMounted||(g.style.transition="none"),q()){var De=se(),Ne=De.box,yt=De.content;yn([Ne,yt],0)}f=function(){var pt;if(!(!p.state.isVisible||u)){if(u=!0,g.offsetHeight,g.style.transition=p.props.moveTransition,q()&&p.props.animation){var gn=se(),en=gn.box,wt=gn.content;yn([en,wt],ee),or([en,wt],"visible")}J(),ye(),rr(kn,p),(pt=p.popperInstance)==null||pt.forceUpdate(),X("onMount",[p]),p.props.animation&&q()&&le(ee,function(){p.state.isShown=!0,X("onShown",[p])})}},Je()}}function Ai(){var k=!p.state.isVisible,M=p.state.isDestroyed,F=!p.state.isEnabled,re=bn(p.props.duration,1,Ve.duration);if(!(k||M||F)&&(X("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,u=!1,a=!1,q()&&(g.style.visibility="hidden"),R(),we(),K(!0),q()){var ee=se(),De=ee.box,Ne=ee.content;p.props.animation&&(yn([De,Ne],re),or([De,Ne],"hidden"))}J(),ye(),p.props.animation?q()&&Z(re,p.unmount):p.unmount()}}function Li(k){V().addEventListener("mousemove",b),rr(on,b),b(k)}function $i(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Kt(),at().forEach(function(k){k._tippy.unmount()}),g.parentNode&&g.parentNode.removeChild(g),kn=kn.filter(function(k){return k!==p}),p.state.isMounted=!1,X("onHidden",[p]))}function Mi(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),bt(),delete t._tippy,p.state.isDestroyed=!0,X("onDestroy",[p]))}}function Wt(t,e){e===void 0&&(e={});var n=Ve.plugins.concat(e.plugins||[]);ha();var r=Object.assign({},e,{plugins:n}),i=ca(t),o=i.reduce(function(a,s){var l=s&&xa(s,r);return l&&a.push(l),a},[]);return vn(t)?o[0]:o}Wt.defaultProps=Ve;Wt.setDefaultProps=ya;Wt.currentInput=We;Object.assign({},li,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Wt.setDefaultProps({render:Ei});function fr(t,e){var i;const n={...e.tippyProps,allowHTML:!0,content:(i=document.getElementById(e.templateId))==null?void 0:i.innerHTML.slice()},r=Wt(t,n);return{destroy:()=>r.destroy()}}function Ca(t,e){const n=new ResizeObserver(r=>{for(const i of r){const o=i.contentBoxSize[0].inlineSize,a=i.contentBoxSize[0].blockSize;e.f(o,a)}});return n.observe(t),{destroy(){n.unobserve(t)}}}let Nt;function Ta(t,e){if(Nt)return;console.debug(`[playback] starting playback at ${t} fps`),e();const n=1e3/Math.ceil(t);Nt=setInterval(()=>{e()},n)}function xi(){Nt&&(clearInterval(Nt),Nt=void 0)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var An=function(t,e){return An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},An(t,e)};function Ci(t,e){An(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Oa(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function Pa(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Sa(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pa(arguments[e]));return t}var Ti=function(){function t(e,n){this.target=n,this.type=e}return t}(),Da=function(t){Ci(e,t);function e(n,r){var i=t.call(this,"error",r)||this;return i.message=n.message,i.error=n,i}return e}(Ti),Aa=function(t){Ci(e,t);function e(n,r,i){n===void 0&&(n=1e3),r===void 0&&(r="");var o=t.call(this,"close",i)||this;return o.wasClean=!0,o.code=n,o.reason=r,o}return e}(Ti);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var La=function(){if(typeof WebSocket<"u")return WebSocket},$a=function(t){return typeof t<"u"&&!!t&&t.CLOSING===2},ht={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Ma=function(){function t(e,n,r){var i=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){i._debug("open event");var a=i._options.minUptime,s=a===void 0?ht.minUptime:a;clearTimeout(i._connectTimeout),i._uptimeTimeout=setTimeout(function(){return i._acceptOpen()},s),i._ws.binaryType=i._binaryType,i._messageQueue.forEach(function(l){return i._ws.send(l)}),i._messageQueue=[],i.onopen&&i.onopen(o),i._listeners.open.forEach(function(l){return i._callEventListener(o,l)})},this._handleMessage=function(o){i._debug("message event"),i.onmessage&&i.onmessage(o),i._listeners.message.forEach(function(a){return i._callEventListener(o,a)})},this._handleError=function(o){i._debug("error event",o.message),i._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),i.onerror&&i.onerror(o),i._debug("exec error listeners"),i._listeners.error.forEach(function(a){return i._callEventListener(o,a)}),i._connect()},this._handleClose=function(o){i._debug("close event"),i._clearTimeouts(),i._shouldReconnect&&i._connect(),i.onclose&&i.onclose(o),i._listeners.close.forEach(function(a){return i._callEventListener(o,a)})},this._url=e,this._protocols=n,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(t,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CONNECTING",{get:function(){return t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPEN",{get:function(){return t.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSING",{get:function(){return t.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSED",{get:function(){return t.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(n,r){return typeof r=="string"?n+=r.length:r instanceof Blob?n+=r.size:n+=r.byteLength,n},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?t.CLOSED:t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),t.prototype.close=function(e,n){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,n)},t.prototype.reconnect=function(e,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,n),this._connect())},t.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var n=this._options.maxEnqueuedMessages,r=n===void 0?ht.maxEnqueuedMessages:n;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},t.prototype.addEventListener=function(e,n){this._listeners[e]&&this._listeners[e].push(n)},t.prototype.dispatchEvent=function(e){var n,r,i=this._listeners[e.type];if(i)try{for(var o=Oa(i),a=o.next();!a.done;a=o.next()){var s=a.value;this._callEventListener(e,s)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!0},t.prototype.removeEventListener=function(e,n){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==n}))},t.prototype._debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._options.debug&&console.log.apply(console,Sa(["RWS>"],e))},t.prototype._getNextDelay=function(){var e=this._options,n=e.reconnectionDelayGrowFactor,r=n===void 0?ht.reconnectionDelayGrowFactor:n,i=e.minReconnectionDelay,o=i===void 0?ht.minReconnectionDelay:i,a=e.maxReconnectionDelay,s=a===void 0?ht.maxReconnectionDelay:a,l=0;return this._retryCount>0&&(l=o*Math.pow(r,this._retryCount-1),l>s&&(l=s)),this._debug("next delay",l),l},t.prototype._wait=function(){var e=this;return new Promise(function(n){setTimeout(n,e._getNextDelay())})},t.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var n=e();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},t.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,r=n.maxRetries,i=r===void 0?ht.maxRetries:r,o=n.connectionTimeout,a=o===void 0?ht.connectionTimeout:o,s=n.WebSocket,l=s===void 0?La():s;if(this._retryCount>=i){this._debug("max retries reached",this._retryCount,">=",i);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!$a(l))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(u){e._closeCalled||(e._debug("connect",{url:u,protocols:e._protocols}),e._ws=e._protocols?new l(u,e._protocols):new l(u),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},a))})}},t.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Da(Error("TIMEOUT"),this))},t.prototype._disconnect=function(e,n){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,n),this._handleClose(new Aa(e,n,this))}catch{}}},t.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},t.prototype._callEventListener=function(e,n){"handleEvent"in n?n.handleEvent(e):n(e)},t.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},t.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},t.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},t}(),xe=(t=>(t[t.PAUSED=0]="PAUSED",t[t.PLAYING=1]="PLAYING",t))(xe||{});function Ba(t,e){const n=function(i){return{x:i.X,y:i.Y}},r=function(i){return{id:i.ID,name:i.Name,author:i.Author,color:i.Color,head:i.HeadType,tail:i.TailType,health:i.Health,latency:i.Latency,body:i.Body.map(n),length:i.Body.length,elimination:i.Death?{turn:i.Death.Turn,cause:i.Death.Cause,by:i.Death.EliminatedBy}:null,isEliminated:i.Death!=null}};return{turn:e.Turn,width:t.Game.Width,height:t.Game.Height,snakes:e.Snakes.map(r),food:e.Food.map(n),hazards:e.Hazards.map(n),isFinalFrame:!1}}let En=new Set;function Ia(t){return t.replace(/^https:\/\//i,"wss://").replace(/^http:\/\//i,"ws://")}function Na(t,e,n,r,i,o,a){console.debug(`[playback] loading game ${e}`),En=new Set;const s=`${n}/games/${e}`,l=`${Ia(n)}/games/${e}/events`;t(s).then(async u=>{if(u.status==404)throw new Error("Game not found");if(!u.ok)throw new Error("Error loading game");const c=await u.json(),d=new Ma(l);d.onopen=()=>{console.debug("[playback] opening engine websocket")},d.onmessage=f=>{const m=JSON.parse(f.data);if(m.Type=="frame"&&!En.has(m.Data.Turn)){En.add(m.Data.Turn);const b=Ba(c,m.Data);r.push(b),r.sort((y,h)=>y.turn-h.turn),m.Data.Turn==0&&console.debug("[playback] received first frame"),i(b)}else m.Type=="game_end"&&(console.debug("[playback] received final frame"),d&&d.close(),r[r.length-1].isFinalFrame=!0,o(r[r.length-1]))},d.onclose=()=>{console.debug("[playback] closing engine websocket")}}).catch(function(u){console.error(u),a(u.message)})}const Ra=250,dr=1500;let qe=[],tt=0,gt=Mn();const Ae=$n(null),Un=$n(null),ja=()=>{qe=[],tt=0,gt=Mn(),Ae.set(null),Un.set(null)},et=t=>{const e=Math.min(Math.max(t,0),qe.length-1),n=qe[e];Ae.update(r=>(r&&(tt=e,r.frame=n,r.frame.isFinalFrame&&r.mode==xe.PLAYING&&(xi(),r.mode=xe.PAUSED,gt.loop&&(setTimeout(rt.firstFrame,dr),setTimeout(rt.play,dr*2)))),r))},pr=t=>{Ae.update(e=>(e&&(e.mode=t),e))},rt={firstFrame:()=>{var t;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED&&et(0)},lastFrame:()=>{var t;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED&&et(qe.length-1)},prevFrame:()=>{var t;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED&&et(tt-1)},nextFrame:()=>{var t;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED&&et(tt+1)},prevEliminationFrame:()=>{var t;if(((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED)for(let e=tt;e>=0;e--){for(let n=0;n<qe[e].snakes.length;n++){const r=qe[e].snakes[n];if(r.elimination&&r.elimination.turn<=tt){const i=r.elimination.turn-1;console.debug(`[playback] jump to elimination frame ${i}`),et(i);return}}rt.firstFrame()}},nextEliminationFrame:()=>{var t;if(((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED){for(let e=tt+2;e<qe.length;e++)for(let n=0;n<qe[e].snakes.length;n++){const r=qe[e].snakes[n];if(r.elimination&&r.elimination.turn>tt+1){const i=r.elimination.turn-1;console.debug(`[playback] jump to elimination frame ${i}`),et(i);return}}rt.lastFrame()}},play:()=>{var t;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED&&(Ta(gt.fps,()=>{et(tt+1)}),pr(xe.PLAYING))},pause:()=>{xi(),pr(xe.PAUSED)},togglePlayPause:()=>{var t,e;((t=Qe(Ae))==null?void 0:t.mode)==xe.PAUSED?rt.play():((e=Qe(Ae))==null?void 0:e.mode)==xe.PLAYING&&rt.pause()},jumpToFrame:t=>{rt.pause(),et(t)}},Ha=t=>{t.turn==gt.turn&&(Ae.set({frame:t,mode:xe.PAUSED,finalFrame:null}),et(gt.turn),gt.autoplay&&setTimeout(rt.play,Ra))},za=t=>{Ae.update(e=>(e&&(e.finalFrame=t),e))},Fa=t=>{Un.set(t)};function Ua(){return{controls:rt,subscribe:Ae.subscribe,load:(t,e)=>{gt={...e},Na(t,e.game,e.engine,qe,Ha,za,Fa)},reset:ja}}const ce=Ua();function Ln(t){try{window.parent.postMessage(t,"*")}catch(e){console.error(e)}}function Va(t,e){Ln({event:"RESIZE",data:{width:t,height:e}})}function Wa(){ce.subscribe(t=>{t&&(Ln({event:"TURN",data:{turn:t.frame.turn}}),t.frame.isFinalFrame&&Ln({event:"GAME_OVER",data:{}}))})}const ln=$n(null);function zt(t,e){const n=Oi(t,e);return{x:n.x+t.cellSizeHalf,y:n.y+t.cellSizeHalf}}function Oi(t,e){return{x:t.gridBorder+e.x*(t.cellSize+t.cellSpacing),y:t.height-(t.gridBorder+e.y*(t.cellSize+t.cellSpacing)+t.cellSize)}}function qa(t,e){const n=zt(t,e);return{cx:n.x,cy:n.y}}function Ft(t,e){const n=Oi(t,e);return{x:n.x,y:n.y,width:t.cellSize,height:t.cellSize}}function hr(t,e){const n=zt(t,e);return{x:n.x,y:n.y+t.cellSizeHalf+t.gridBorder/2}}function vr(t,e){const n=zt(t,e);return{x:n.x-t.cellSizeHalf-t.gridBorder/2,y:n.y}}function Ga(t){let e,n,r=[{id:n=`hazard-${t[0]}`},{class:"hazard fill-black opacity-30"},t[1]],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("rect"),this.h()},l(o){e=be(o,"rect",{id:!0,class:!0}),B(e).forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a)},p(o,[a]){ne(e,i=Se(r,[a&1&&n!==(n=`hazard-${o[0]}`)&&{id:n},{class:"hazard fill-black opacity-30"},a&2&&o[1]]))},i:L,o:L,d(o){o&&w(e)}}}function Ya(t,e,n){let r,{key:i}=e,{point:o}=e,{svgCalcParams:a}=e;return t.$$set=s=>{"key"in s&&n(0,i=s.key),"point"in s&&n(2,o=s.point),"svgCalcParams"in s&&n(3,a=s.svgCalcParams)},t.$$.update=()=>{t.$$.dirty&12&&n(1,r=Ft(a,o))},[i,r,o,a]}class Ka extends me{constructor(e){super(),ge(this,e,Ya,Ga,ve,{key:0,point:2,svgCalcParams:3})}}const xn={};async function dn(t,e){const n=`snakes/${t}s/${e}.svg`;return n in xn||(xn[n]=await fetch(`https://media.battlesnake.com/${n}`).then(r=>r.text()).then(r=>{const i=document.createElement("template");return i.innerHTML=r.trim(),console.debug(`[customizations] loaded svg definition for ${n}`),i.content.firstChild===null?(console.debug("[customizations] error loading customization, no elements found"),""):i.content.firstChild.innerHTML})),xn[n]}function mr(t,e){return t==null||e==null?!1:t.x==e.x&&t.y==e.y}function Rt(t,e){return Xa(t,e)==1}function Xa(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Ja(t,e){return{x:t.x-Math.sign(e.x-t.x),y:t.y-Math.sign(e.y-t.y)}}function Pi(t,e){return{x:e.x+Math.sign(e.x-t.x),y:e.y+Math.sign(e.y-t.y)}}function Qa(t){return{c:L,l:L,m:L,p:L,d:L}}function Za(t){let e,n=t[3]&&gr(t);return{c(){n&&n.c(),e=j()},l(r){n&&n.l(r),e=j()},m(r,i){n&&n.m(r,i),D(r,e,i)},p(r,i){r[3]?n?n.p(r,i):(n=gr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&w(e),n&&n.d(r)}}}function gr(t){let e,n,r,i=t[6]+"",o,a=[{class:"tail"},{viewBox:"0 0 100 100"},{fill:o=t[0].color},t[2]],s={};for(let l=0;l<a.length;l+=1)s=te(s,a[l]);return{c(){e=_e("svg"),n=_e("g"),r=new Ke(!0),this.h()},l(l){e=be(l,"svg",{class:!0,viewBox:!0,fill:!0});var u=B(e);n=be(u,"g",{transform:!0});var c=B(n);r=Xe(c,!0),c.forEach(w),u.forEach(w),this.h()},h(){r.a=null,N(n,"transform",t[1]),ne(e,s)},m(l,u){D(l,e,u),O(e,n),r.m(i,n)},p(l,u){u&1&&i!==(i=l[6]+"")&&r.p(i),u&2&&N(n,"transform",l[1]),ne(e,s=Se(a,[{class:"tail"},{viewBox:"0 0 100 100"},u&1&&o!==(o=l[0].color)&&{fill:o},u&4&&l[2]]))},d(l){l&&w(e)}}}function es(t){return{c:L,l:L,m:L,p:L,d:L}}function ts(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:es,then:Za,catch:Qa,value:6};return cn(n=dn("tail",t[0].tail),r),{c(){e=j(),r.block.c()},l(i){e=j(),r.block.l(i)},m(i,o){D(i,e,o),r.block.m(i,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e},p(i,[o]){t=i,r.ctx=t,o&1&&n!==(n=dn("tail",t[0].tail))&&cn(n,r)||ii(r,t,o)},i:L,o:L,d(i){i&&w(e),r.block.d(i),r.token=null,r=null}}}function ns(t){const e=t.body[0],n=t.body[t.body.length-1];return!(e.x==n.x&&e.y==n.y)}function rs(t,e,n){let r,i,o,{snake:a}=e,{svgCalcParams:s}=e;function l(u){const c=u.body[u.body.length-1];let d=u.body.length-2,f=u.body[d];for(;f.x==c.x&&f.y==c.y;){if(d-=1,d<0)return"";f=u.body[d]}return Rt(f,c)||(f=Pi(f,c)),f.x>c.x?"scale(-1,1) translate(-100,0)":f.y>c.y?"scale(-1,1) translate(-100,0) rotate(90, 50, 50)":f.y<c.y?"scale(-1,1) translate(-100,0) rotate(-90, 50, 50)":""}return t.$$set=u=>{"snake"in u&&n(0,a=u.snake),"svgCalcParams"in u&&n(4,s=u.svgCalcParams)},t.$$.update=()=>{t.$$.dirty&1&&n(3,r=ns(a)),t.$$.dirty&17&&n(2,i=Ft(s,a.body[a.body.length-1])),t.$$.dirty&1&&n(1,o=l(a))},[a,o,i,r,s]}class is extends me{constructor(e){super(),ge(this,e,rs,ts,ve,{snake:0,svgCalcParams:4})}}function os(t){return{c:L,l:L,m:L,p:L,d:L}}function as(t){let e,n=t[5]&&_r(t);return{c(){n&&n.c(),e=j()},l(r){n&&n.l(r),e=j()},m(r,i){n&&n.m(r,i),D(r,e,i)},p(r,i){r[5]?n?n.p(r,i):(n=_r(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&w(e),n&&n.d(r)}}}function _r(t){let e,n,r,i=t[8]+"",o,a,s=[{class:o="head "+t[1]},{viewBox:"0 0 100 100"},{fill:a=t[0].color},t[4]],l={};for(let u=0;u<s.length;u+=1)l=te(l,s[u]);return{c(){e=_e("svg"),n=_e("g"),r=new Ke(!0),this.h()},l(u){e=be(u,"svg",{class:!0,viewBox:!0,fill:!0});var c=B(e);n=be(c,"g",{transform:!0});var d=B(n);r=Xe(d,!0),d.forEach(w),c.forEach(w),this.h()},h(){r.a=null,N(n,"transform",t[3]),ne(e,l),ct(e,"shadow",t[2]),ct(e,"svelte-1qlhiud",!0)},m(u,c){D(u,e,c),O(e,n),r.m(i,n)},p(u,c){c&1&&i!==(i=u[8]+"")&&r.p(i),c&8&&N(n,"transform",u[3]),ne(e,l=Se(s,[c&2&&o!==(o="head "+u[1])&&{class:o},{viewBox:"0 0 100 100"},c&1&&a!==(a=u[0].color)&&{fill:a},c&16&&u[4]])),ct(e,"shadow",u[2]),ct(e,"svelte-1qlhiud",!0)},d(u){u&&w(e)}}}function ss(t){return{c:L,l:L,m:L,p:L,d:L}}function ls(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ss,then:as,catch:os,value:8};return cn(n=dn("head",t[0].head),r),{c(){e=j(),r.block.c()},l(i){e=j(),r.block.l(i)},m(i,o){D(i,e,o),r.block.m(i,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e},p(i,[o]){t=i,r.ctx=t,o&1&&n!==(n=dn("head",t[0].head))&&cn(n,r)||ii(r,t,o)},i:L,o:L,d(i){i&&w(e),r.block.d(i),r.token=null,r=null}}}function cs(t){return!0}function us(t){return t=="left"?"scale(-1,1) translate(-100, 0)":t=="up"?"rotate(-90, 50, 50)":t=="down"?"rotate(90, 50, 50)":""}function fs(t){var e;return t.isEliminated&&((e=t.elimination)==null?void 0:e.cause)=="snake-self-collision"}function ds(t,e,n){let r,i,o,a,s,{snake:l}=e,{svgCalcParams:u}=e;function c(d){const[f,m]=d.body.slice(0,2);let b=m;return Rt(b,f)||(b=Pi(b,f)),f.x<b.x?"left":f.y>b.y?"up":f.y<b.y?"down":"right"}return t.$$set=d=>{"snake"in d&&n(0,l=d.snake),"svgCalcParams"in d&&n(6,u=d.svgCalcParams)},t.$$.update=()=>{t.$$.dirty&1&&n(5,r=cs()),t.$$.dirty&65&&n(4,i=Ft(u,l.body[0])),t.$$.dirty&1&&n(1,o=c(l)),t.$$.dirty&2&&n(3,a=us(o)),t.$$.dirty&1&&n(2,s=fs(l))},[l,o,s,a,i,r,u]}class ps extends me{constructor(e){super(),ge(this,e,ds,ls,ve,{snake:0,svgCalcParams:6})}}function br(t,e,n){const r=t.slice();return r[13]=e[n],r}function yr(t){let e,n=he(t[1]),r=[];for(let i=0;i<n.length;i+=1)r[i]=wr(br(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);e=j()},m(i,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,o);D(i,e,o)},p(i,o){if(o&3){n=he(i[1]);let a;for(a=0;a<n.length;a+=1){const s=br(i,n,a);r[a]?r[a].p(s,o):(r[a]=wr(s),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&w(e),je(r,i)}}}function wr(t){let e,n,r=[{stroke:n=t[0].color},{fill:"transparent"},t[13]],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("polyline"),this.h()},l(o){e=be(o,"polyline",{stroke:!0,fill:!0}),B(e).forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a)},p(o,a){ne(e,i=Se(r,[a&1&&n!==(n=o[0].color)&&{stroke:n},{fill:"transparent"},a&2&&o[13]]))},d(o){o&&w(e)}}}function hs(t){let e,n=t[2]&&yr(t);return{c(){n&&n.c(),e=j()},l(r){n&&n.l(r),e=j()},m(r,i){n&&n.m(r,i),D(r,e,i)},p(r,[i]){r[2]?n?n.p(r,i):(n=yr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:L,o:L,d(r){r&&w(e),n&&n.d(r)}}}const Ze=.1;function vs(t,e,n){let r,i,o,{snake:a}=e,{svgCalcParams:s}=e;function l(h){const x=[...h.body],_=x.shift(),C=x.pop();for(let p=x.at(-1);mr(p,C);p=x.at(-1))x.pop();if(x.length==0){if(!mr(_,C)){const p=zt(s,_);return[b(_,C,p)]}return[[]]}return u(x,_,C)}function u(h,x,_){var E,S,I;const C=s.cellSpacing+Ze,P=c(h).map(A=>A.map(d));for(let A=0;A<P.length;A++){if(A<P.length-1){const q=P[A].at(-1),U=P[A+1][0];P[A].push(f(q,U))}if(A>0){const q=P[A][0],U=P[A-1].at(-1);P[A].unshift(f(q,U))}}const g=P[0][0];Rt(x,g)?P[0].unshift(m(g,x,C)):P[0].unshift(f(d(g),x));const v=(E=P.at(-1))==null?void 0:E.at(-1);return Rt(v,_)?(S=P.at(-1))==null||S.push(m(v,_,C)):(I=P.at(-1))==null||I.push(f(v,_)),P.map(A=>A.map(q=>({x:q.cx,y:q.cy})))}function c(h){var C;if(h.length==0)return[[]];let x=h[0];const _=[[x]];for(let p=1;p<h.length;p++){const P=h[p];Rt(P,x)||_.push([]),(C=_.at(-1))==null||C.push(P),x=P}return _}function d(h){const x=zt(s,h);return{cx:x.x,cy:x.y,...h}}function f(h,x){const _=Ja(h,x);return m(h,_)}function m(h,x,_=0){if(x.x>h.x)return{...h,cx:h.cx+s.cellSizeHalf+_,cy:h.cy};if(x.x<h.x)return{...h,cx:h.cx-s.cellSizeHalf-_,cy:h.cy};if(x.y>h.y)return{...h,cx:h.cx,cy:h.cy-s.cellSizeHalf-_};if(x.y<h.y)return{...h,cx:h.cx,cy:h.cy+s.cellSizeHalf+_};throw new Error("Same point have no joint.")}function b(h,x,_){if(h.x>x.x)return[{x:_.x-s.cellSizeHalf+Ze,y:_.y},{x:_.x-s.cellSizeHalf-s.cellSpacing-Ze,y:_.y}];if(h.x<x.x)return[{x:_.x+s.cellSizeHalf-Ze,y:_.y},{x:_.x+s.cellSizeHalf+s.cellSpacing+Ze,y:_.y}];if(h.y>x.y)return[{x:_.x,y:_.y+s.cellSizeHalf-Ze},{x:_.x,y:_.y+s.cellSizeHalf+s.cellSpacing+Ze}];if(h.y<x.y)return[{x:_.x,y:_.y-s.cellSizeHalf+Ze},{x:_.x,y:_.y-s.cellSizeHalf-s.cellSpacing-Ze}];throw new Error("Head and tail is a same point.")}function y(h){return{points:h.map(_=>`${_.x},${_.y}`).join(" "),"stroke-width":s.cellSize,"stroke-linecap":"butt","stroke-linejoin":"round"}}return t.$$set=h=>{"snake"in h&&n(0,a=h.snake),"svgCalcParams"in h&&n(3,s=h.svgCalcParams)},t.$$.update=()=>{t.$$.dirty&1&&n(4,r=l(a)),t.$$.dirty&16&&n(2,i=r[0].length>0),t.$$.dirty&16&&n(1,o=r.map(y))},[a,o,i,s,r]}class ms extends me{constructor(e){super(),ge(this,e,vs,hs,ve,{snake:0,svgCalcParams:3})}}function gs(t){let e,n,r,i,o,a;return n=new is({props:{svgCalcParams:t[1],snake:t[0]}}),r=new ms({props:{svgCalcParams:t[1],snake:t[0]}}),i=new ps({props:{svgCalcParams:t[1],snake:t[0]}}),{c(){e=_e("g"),ue(n.$$.fragment),ue(r.$$.fragment),ue(i.$$.fragment),this.h()},l(s){e=be(s,"g",{id:!0,class:!0});var l=B(e);fe(n.$$.fragment,l),fe(r.$$.fragment,l),fe(i.$$.fragment,l),l.forEach(w),this.h()},h(){N(e,"id",o=`snake-${t[0].id}`),N(e,"class","snake"),Et(e,"opacity",t[2])},m(s,l){D(s,e,l),de(n,e,null),de(r,e,null),de(i,e,null),a=!0},p(s,[l]){const u={};l&2&&(u.svgCalcParams=s[1]),l&1&&(u.snake=s[0]),n.$set(u);const c={};l&2&&(c.svgCalcParams=s[1]),l&1&&(c.snake=s[0]),r.$set(c);const d={};l&2&&(d.svgCalcParams=s[1]),l&1&&(d.snake=s[0]),i.$set(d),(!a||l&1&&o!==(o=`snake-${s[0].id}`))&&N(e,"id",o),l&4&&Et(e,"opacity",s[2])},i(s){a||(T(n.$$.fragment,s),T(r.$$.fragment,s),T(i.$$.fragment,s),a=!0)},o(s){$(n.$$.fragment,s),$(r.$$.fragment,s),$(i.$$.fragment,s),a=!1},d(s){s&&w(e),pe(n),pe(r),pe(i)}}}function _s(t,e,n){let{snake:r}=e,{svgCalcParams:i}=e,{opacity:o=1}=e;return t.$$set=a=>{"snake"in a&&n(0,r=a.snake),"svgCalcParams"in a&&n(1,i=a.svgCalcParams),"opacity"in a&&n(2,o=a.opacity)},[r,i,o]}class mn extends me{constructor(e){super(),ge(this,e,_s,gs,ve,{snake:0,svgCalcParams:1,opacity:2})}}function bs(t){let e,n,r=[{id:n=`food-${t[0]}`},{class:"food fill-rose-500"},{r:t[1]},t[2]],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("circle"),this.h()},l(o){e=be(o,"circle",{id:!0,class:!0,r:!0}),B(e).forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a)},p(o,[a]){ne(e,i=Se(r,[a&1&&n!==(n=`food-${o[0]}`)&&{id:n},{class:"food fill-rose-500"},a&2&&{r:o[1]},a&4&&o[2]]))},i:L,o:L,d(o){o&&w(e)}}}function ys(t,e,n){let r,i,{key:o}=e,{point:a}=e,{svgCalcParams:s}=e;return t.$$set=l=>{"key"in l&&n(0,o=l.key),"point"in l&&n(3,a=l.point),"svgCalcParams"in l&&n(4,s=l.svgCalcParams)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=qa(s,a)),t.$$.dirty&16&&n(1,i=(s.cellSize/3.25).toFixed(2))},[o,i,r,a,s]}class ws extends me{constructor(e){super(),ge(this,e,ys,bs,ve,{key:0,point:3,svgCalcParams:4})}}function kr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Er(t,e,n){const r=t.slice();return r[4]=e[n],r[8]=n,r}function xr(t,e,n){const r=t.slice();return r[4]=e[n],r[8]=n,r}function Cr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Tr(t){let e,n,r=[{id:n=`grid-${t[8]}-${t[6]}`},{class:"grid fill-[#f1f1f1] dark:fill-[#393939]"},Ft(t[3],{x:t[8],y:t[6]})],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("rect"),this.h()},l(o){e=be(o,"rect",{id:!0,class:!0}),B(e).forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a)},p(o,a){ne(e,i=Se(r,[{id:n},{class:"grid fill-[#f1f1f1] dark:fill-[#393939]"},a&8&&Ft(o[3],{x:o[8],y:o[6]})]))},d(o){o&&w(e)}}}function Or(t){let e,n=he({length:t[1]}),r=[];for(let i=0;i<n.length;i+=1)r[i]=Tr(Cr(t,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=j()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);e=j()},m(i,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,o);D(i,e,o)},p(i,o){if(o&10){n=he({length:i[1]});let a;for(a=0;a<n.length;a+=1){const s=Cr(i,n,a);r[a]?r[a].p(s,o):(r[a]=Tr(s),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(i){i&&w(e),je(r,i)}}}function Pr(t){let e,n,r=he({length:t[1]}),i=[];for(let s=0;s<r.length;s+=1)i[s]=Sr(Er(t,r,s));let o=he({length:t[1]}),a=[];for(let s=0;s<o.length;s+=1)a[s]=Dr(kr(t,o,s));return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=j();for(let s=0;s<a.length;s+=1)a[s].c();n=j()},l(s){for(let l=0;l<i.length;l+=1)i[l].l(s);e=j();for(let l=0;l<a.length;l+=1)a[l].l(s);n=j()},m(s,l){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(s,l);D(s,e,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(s,l);D(s,n,l)},p(s,l){if(l&10){r=he({length:s[1]});let u;for(u=0;u<r.length;u+=1){const c=Er(s,r,u);i[u]?i[u].p(c,l):(i[u]=Sr(c),i[u].c(),i[u].m(e.parentNode,e))}for(;u<i.length;u+=1)i[u].d(1);i.length=r.length}if(l&10){o=he({length:s[1]});let u;for(u=0;u<o.length;u+=1){const c=kr(s,o,u);a[u]?a[u].p(c,l):(a[u]=Dr(c),a[u].c(),a[u].m(n.parentNode,n))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(s){s&&(w(e),w(n)),je(i,s),je(a,s)}}}function Sr(t){let e,n,r=[{class:"coordinate-label text-[0.35rem] fill-neutral-500"},{"text-anchor":"middle"},{transform:"translate(0, 2)"},hr(t[3],{x:t[8],y:0})],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("text"),n=Te(t[8]),this.h()},l(o){e=be(o,"text",{class:!0,"text-anchor":!0,transform:!0});var a=B(e);n=Oe(a,t[8]),a.forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a),O(e,n)},p(o,a){ne(e,i=Se(r,[{class:"coordinate-label text-[0.35rem] fill-neutral-500"},{"text-anchor":"middle"},{transform:"translate(0, 2)"},a&8&&hr(o[3],{x:o[8],y:0})]))},d(o){o&&w(e)}}}function Dr(t){let e,n,r=[{class:"coordinate-label text-[0.35rem] fill-neutral-500"},{"text-anchor":"middle"},{transform:"translate(0, 2)"},vr(t[3],{x:0,y:t[6]})],i={};for(let o=0;o<r.length;o+=1)i=te(i,r[o]);return{c(){e=_e("text"),n=Te(t[6]),this.h()},l(o){e=be(o,"text",{class:!0,"text-anchor":!0,transform:!0});var a=B(e);n=Oe(a,t[6]),a.forEach(w),this.h()},h(){ne(e,i)},m(o,a){D(o,e,a),O(e,n)},p(o,a){ne(e,i=Se(r,[{class:"coordinate-label text-[0.35rem] fill-neutral-500"},{"text-anchor":"middle"},{transform:"translate(0, 2)"},a&8&&vr(o[3],{x:0,y:o[6]})]))},d(o){o&&w(e)}}}function ks(t){let e,n,r=he({length:t[0]}),i=[];for(let a=0;a<r.length;a+=1)i[a]=Or(xr(t,r,a));let o=t[2]&&Pr(t);return{c(){e=_e("g");for(let a=0;a<i.length;a+=1)i[a].c();n=j(),o&&o.c()},l(a){e=be(a,"g",{});var s=B(e);for(let l=0;l<i.length;l+=1)i[l].l(s);n=j(),o&&o.l(s),s.forEach(w)},m(a,s){D(a,e,s);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null);O(e,n),o&&o.m(e,null)},p(a,[s]){if(s&11){r=he({length:a[0]});let l;for(l=0;l<r.length;l+=1){const u=xr(a,r,l);i[l]?i[l].p(u,s):(i[l]=Or(u),i[l].c(),i[l].m(e,n))}for(;l<i.length;l+=1)i[l].d(1);i.length=r.length}a[2]?o?o.p(a,s):(o=Pr(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:L,o:L,d(a){a&&w(e),je(i,a),o&&o.d()}}}function Es(t,e,n){let{gridWidth:r}=e,{gridHeight:i}=e,{showLabels:o}=e,{svgCalcParams:a}=e;return t.$$set=s=>{"gridWidth"in s&&n(0,r=s.gridWidth),"gridHeight"in s&&n(1,i=s.gridHeight),"showLabels"in s&&n(2,o=s.showLabels),"svgCalcParams"in s&&n(3,a=s.svgCalcParams)},[r,i,o,a]}class xs extends me{constructor(e){super(),ge(this,e,Es,ks,ve,{gridWidth:0,gridHeight:1,showLabels:2,svgCalcParams:3})}}function Ar(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Lr(t,e,n){const r=t.slice();return r[10]=e[n],r[9]=n,r}function $r(t,e,n){const r=t.slice();return r[12]=e[n],r}function Mr(t,e,n){const r=t.slice();return r[12]=e[n],r}function Br(t,e,n){const r=t.slice();return r[12]=e[n],r}function Ir(t,e,n){const r=t.slice();return r[12]=e[n],r}function Nr(t){let e,n,r,i,o,a,s,l;n=new xs({props:{gridWidth:t[3].frame.width,gridHeight:t[3].frame.height,showLabels:t[0],svgCalcParams:t[4]}});const u=[Ts,Cs],c=[];function d(_,C){return _[5]?0:1}r=d(t),i=c[r]=u[r](t);let f=he(t[3].frame.hazards),m=[];for(let _=0;_<f.length;_+=1)m[_]=qr(Lr(t,f,_));const b=_=>$(m[_],1,1,()=>{m[_]=null});let y=he(t[3].frame.food),h=[];for(let _=0;_<y.length;_+=1)h[_]=Gr(Ar(t,y,_));const x=_=>$(h[_],1,1,()=>{h[_]=null});return{c(){e=_e("svg"),ue(n.$$.fragment),i.c(),o=j();for(let _=0;_<m.length;_+=1)m[_].c();a=j();for(let _=0;_<h.length;_+=1)h[_].c();this.h()},l(_){e=be(_,"svg",{class:!0,viewBox:!0});var C=B(e);fe(n.$$.fragment,C),i.l(C),o=j();for(let p=0;p<m.length;p+=1)m[p].l(C);a=j();for(let p=0;p<h.length;p+=1)h[p].l(C);C.forEach(w),this.h()},h(){N(e,"class","gameboard flex-shrink"),N(e,"viewBox",s="0 0 "+t[1]+" "+t[2])},m(_,C){D(_,e,C),de(n,e,null),c[r].m(e,null),O(e,o);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(e,null);O(e,a);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(e,null);l=!0},p(_,C){const p={};C&8&&(p.gridWidth=_[3].frame.width),C&8&&(p.gridHeight=_[3].frame.height),C&1&&(p.showLabels=_[0]),C&16&&(p.svgCalcParams=_[4]),n.$set(p);let P=r;if(r=d(_),r===P?c[r].p(_,C):(ke(),$(c[P],1,1,()=>{c[P]=null}),Ee(),i=c[r],i?i.p(_,C):(i=c[r]=u[r](_),i.c()),T(i,1),i.m(e,o)),C&24){f=he(_[3].frame.hazards);let g;for(g=0;g<f.length;g+=1){const v=Lr(_,f,g);m[g]?(m[g].p(v,C),T(m[g],1)):(m[g]=qr(v),m[g].c(),T(m[g],1),m[g].m(e,a))}for(ke(),g=f.length;g<m.length;g+=1)b(g);Ee()}if(C&24){y=he(_[3].frame.food);let g;for(g=0;g<y.length;g+=1){const v=Ar(_,y,g);h[g]?(h[g].p(v,C),T(h[g],1)):(h[g]=Gr(v),h[g].c(),T(h[g],1),h[g].m(e,null))}for(ke(),g=y.length;g<h.length;g+=1)x(g);Ee()}(!l||C&6&&s!==(s="0 0 "+_[1]+" "+_[2]))&&N(e,"viewBox",s)},i(_){if(!l){T(n.$$.fragment,_),T(i);for(let C=0;C<f.length;C+=1)T(m[C]);for(let C=0;C<y.length;C+=1)T(h[C]);l=!0}},o(_){$(n.$$.fragment,_),$(i),m=m.filter(Boolean);for(let C=0;C<m.length;C+=1)$(m[C]);h=h.filter(Boolean);for(let C=0;C<h.length;C+=1)$(h[C]);l=!1},d(_){_&&w(e),pe(n),c[r].d(),je(m,_),je(h,_)}}}function Cs(t){let e,n,r,i=he(t[3].frame.snakes),o=[];for(let c=0;c<i.length;c+=1)o[c]=jr(Mr(t,i,c));const a=c=>$(o[c],1,1,()=>{o[c]=null});let s=he(t[3].frame.snakes),l=[];for(let c=0;c<s.length;c+=1)l[c]=zr($r(t,s,c));const u=c=>$(l[c],1,1,()=>{l[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=j();for(let c=0;c<l.length;c+=1)l[c].c();n=j()},l(c){for(let d=0;d<o.length;d+=1)o[d].l(c);e=j();for(let d=0;d<l.length;d+=1)l[d].l(c);n=j()},m(c,d){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,d);D(c,e,d);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(c,d);D(c,n,d),r=!0},p(c,d){if(d&24){i=he(c[3].frame.snakes);let f;for(f=0;f<i.length;f+=1){const m=Mr(c,i,f);o[f]?(o[f].p(m,d),T(o[f],1)):(o[f]=jr(m),o[f].c(),T(o[f],1),o[f].m(e.parentNode,e))}for(ke(),f=i.length;f<o.length;f+=1)a(f);Ee()}if(d&24){s=he(c[3].frame.snakes);let f;for(f=0;f<s.length;f+=1){const m=$r(c,s,f);l[f]?(l[f].p(m,d),T(l[f],1)):(l[f]=zr(m),l[f].c(),T(l[f],1),l[f].m(n.parentNode,n))}for(ke(),f=s.length;f<l.length;f+=1)u(f);Ee()}},i(c){if(!r){for(let d=0;d<i.length;d+=1)T(o[d]);for(let d=0;d<s.length;d+=1)T(l[d]);r=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)$(o[d]);l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)$(l[d]);r=!1},d(c){c&&(w(e),w(n)),je(o,c),je(l,c)}}}function Ts(t){let e,n,r,i=he(t[3].frame.snakes),o=[];for(let c=0;c<i.length;c+=1)o[c]=Ur(Ir(t,i,c));const a=c=>$(o[c],1,1,()=>{o[c]=null});let s=he(t[3].frame.snakes),l=[];for(let c=0;c<s.length;c+=1)l[c]=Wr(Br(t,s,c));const u=c=>$(l[c],1,1,()=>{l[c]=null});return{c(){for(let c=0;c<o.length;c+=1)o[c].c();e=j();for(let c=0;c<l.length;c+=1)l[c].c();n=j()},l(c){for(let d=0;d<o.length;d+=1)o[d].l(c);e=j();for(let d=0;d<l.length;d+=1)l[d].l(c);n=j()},m(c,d){for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(c,d);D(c,e,d);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(c,d);D(c,n,d),r=!0},p(c,d){if(d&56){i=he(c[3].frame.snakes);let f;for(f=0;f<i.length;f+=1){const m=Ir(c,i,f);o[f]?(o[f].p(m,d),T(o[f],1)):(o[f]=Ur(m),o[f].c(),T(o[f],1),o[f].m(e.parentNode,e))}for(ke(),f=i.length;f<o.length;f+=1)a(f);Ee()}if(d&56){s=he(c[3].frame.snakes);let f;for(f=0;f<s.length;f+=1){const m=Br(c,s,f);l[f]?(l[f].p(m,d),T(l[f],1)):(l[f]=Wr(m),l[f].c(),T(l[f],1),l[f].m(n.parentNode,n))}for(ke(),f=s.length;f<l.length;f+=1)u(f);Ee()}},i(c){if(!r){for(let d=0;d<i.length;d+=1)T(o[d]);for(let d=0;d<s.length;d+=1)T(l[d]);r=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)$(o[d]);l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)$(l[d]);r=!1},d(c){c&&(w(e),w(n)),je(o,c),je(l,c)}}}function Rr(t){let e,n;return e=new mn({props:{snake:t[12],svgCalcParams:t[4],opacity:.1}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.snake=r[12]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function jr(t){let e,n,r=t[12].isEliminated&&Rr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,o){i[12].isEliminated?r?(r.p(i,o),o&8&&T(r,1)):(r=Rr(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ke(),$(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}function Hr(t){let e,n;return e=new mn({props:{snake:t[12],svgCalcParams:t[4]}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.snake=r[12]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function zr(t){let e,n,r=!t[12].isEliminated&&Hr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,o){i[12].isEliminated?r&&(ke(),$(r,1,1,()=>{r=null}),Ee()):r?(r.p(i,o),o&8&&T(r,1)):(r=Hr(i),r.c(),T(r,1),r.m(e.parentNode,e))},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}function Fr(t){let e,n;return e=new mn({props:{snake:t[12],svgCalcParams:t[4],opacity:.1}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.snake=r[12]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Ur(t){let e,n,r=t[12].id!==t[5]&&Fr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,o){i[12].id!==i[5]?r?(r.p(i,o),o&40&&T(r,1)):(r=Fr(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ke(),$(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}function Vr(t){let e,n;return e=new mn({props:{snake:t[12],svgCalcParams:t[4]}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.snake=r[12]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Wr(t){let e,n,r=t[12].id===t[5]&&Vr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,o){i[12].id===i[5]?r?(r.p(i,o),o&40&&T(r,1)):(r=Vr(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ke(),$(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}function qr(t){let e,n;return e=new Ka({props:{point:t[10],key:`${t[9]}`,svgCalcParams:t[4]}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.point=r[10]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Gr(t){let e,n;return e=new ws({props:{point:t[7],key:`${t[9]}`,svgCalcParams:t[4]}}),{c(){ue(e.$$.fragment)},l(r){fe(e.$$.fragment,r)},m(r,i){de(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.point=r[7]),i&16&&(o.svgCalcParams=r[4]),e.$set(o)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){pe(e,r)}}}function Os(t){let e,n,r=t[3]&&Nr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,[o]){i[3]?r?(r.p(i,o),o&8&&T(r,1)):(r=Nr(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ke(),$(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}const an=20,Cn=4,Tn=10;function Ps(t,e,n){let r,i,o,a,s;ut(t,ce,c=>n(3,a=c)),ut(t,ln,c=>n(5,s=c));const l=an/2;let{showCoordinates:u}=e;return t.$$set=c=>{"showCoordinates"in c&&n(0,u=c.showCoordinates)},t.$$.update=()=>{t.$$.dirty&8&&n(1,r=a?2*Tn+a.frame.width*an+Math.max(a.frame.width-1,0)*Cn:0),t.$$.dirty&8&&n(2,i=a?2*Tn+a.frame.height*an+Math.max(a.frame.height-1,0)*Cn:0),t.$$.dirty&6&&n(4,o={cellSize:an,cellSizeHalf:l,cellSpacing:Cn,gridBorder:Tn,height:i,width:r})},[u,r,i,a,o,s]}class Ss extends me{constructor(e){super(),ge(this,e,Ps,Os,ve,{showCoordinates:0})}}function Ds(t){let e,n,r='<path fill="currentColor" fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643z" clip-rule="evenodd"/>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function As(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class Ls extends me{constructor(e){super(),ge(this,e,As,Ds,ve,{})}}function $s(t){let e,n,r='<path fill="currentColor" fill-rule="evenodd" d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75z" clip-rule="evenodd"/>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function Ms(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class Bs extends me{constructor(e){super(),ge(this,e,Ms,$s,ve,{})}}function Is(t){let e,n,r='<path fill="currentColor" fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12L7.72 5.03a.75.75 0 0 1 1.06-1.06z" clip-rule="evenodd"/>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function Ns(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class Rs extends me{constructor(e){super(),ge(this,e,Ns,Is,ve,{})}}function js(t){let e,n,r='<path fill="currentColor" fill-rule="evenodd" d="M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06z" clip-rule="evenodd"/>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function Hs(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class zs extends me{constructor(e){super(),ge(this,e,Hs,js,ve,{})}}function Fs(t){let e,n,r='<g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06z"/><path d="M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06z"/></g>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function Us(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class Vs extends me{constructor(e){super(),ge(this,e,Us,Fs,ve,{})}}function Ws(t){let e,n,r='<g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12L4.72 5.03a.75.75 0 0 1 1.06-1.06z"/><path d="M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06z"/></g>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function qs(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class Gs extends me{constructor(e){super(),ge(this,e,qs,Ws,ve,{})}}function Yr(t){let e,n,r,i,o,a,s,l,u,c,d,f,m,b,y,h,x,_;r=new Vs({}),a=new zs({});const C=[Ks,Ys],p=[];function P(g,v){return g[0].mode==xe.PLAYING?0:g[0].mode==xe.PAUSED?1:-1}return~(l=P(t))&&(u=p[l]=C[l](t)),f=new Rs({}),y=new Gs({}),{c(){e=H("div"),n=H("button"),ue(r.$$.fragment),i=oe(),o=H("button"),ue(a.$$.fragment),s=oe(),u&&u.c(),c=oe(),d=H("button"),ue(f.$$.fragment),m=oe(),b=H("button"),ue(y.$$.fragment),this.h()},l(g){e=z(g,"DIV",{});var v=B(e);n=z(v,"BUTTON",{class:!0});var E=B(n);fe(r.$$.fragment,E),E.forEach(w),i=ae(v),o=z(v,"BUTTON",{class:!0});var S=B(o);fe(a.$$.fragment,S),S.forEach(w),s=ae(v),u&&u.l(v),c=ae(v),d=z(v,"BUTTON",{class:!0});var I=B(d);fe(f.$$.fragment,I),I.forEach(w),m=ae(v),b=z(v,"BUTTON",{class:!0});var A=B(b);fe(y.$$.fragment,A),A.forEach(w),v.forEach(w),this.h()},h(){N(n,"class","mx-2 disabled:text-neutral-400"),n.disabled=t[1],N(o,"class","mx-2 disabled:text-neutral-400"),o.disabled=t[1],N(d,"class","mx-2 disabled:text-neutral-400"),d.disabled=t[1],N(b,"class","mx-2 disabled:text-neutral-400"),b.disabled=t[1]},m(g,v){D(g,e,v),O(e,n),de(r,n,null),O(e,i),O(e,o),de(a,o,null),O(e,s),~l&&p[l].m(e,null),O(e,c),O(e,d),de(f,d,null),O(e,m),O(e,b),de(y,b,null),h=!0,x||(_=[Ue(n,"click",ce.controls.firstFrame),Ue(o,"click",ce.controls.prevFrame),Ue(d,"click",ce.controls.nextFrame),Ue(b,"click",ce.controls.lastFrame)],x=!0)},p(g,v){(!h||v&2)&&(n.disabled=g[1]),(!h||v&2)&&(o.disabled=g[1]);let E=l;l=P(g),l!==E&&(u&&(ke(),$(p[E],1,1,()=>{p[E]=null}),Ee()),~l?(u=p[l],u||(u=p[l]=C[l](g),u.c()),T(u,1),u.m(e,c)):u=null),(!h||v&2)&&(d.disabled=g[1]),(!h||v&2)&&(b.disabled=g[1])},i(g){h||(T(r.$$.fragment,g),T(a.$$.fragment,g),T(u),T(f.$$.fragment,g),T(y.$$.fragment,g),h=!0)},o(g){$(r.$$.fragment,g),$(a.$$.fragment,g),$(u),$(f.$$.fragment,g),$(y.$$.fragment,g),h=!1},d(g){g&&w(e),pe(r),pe(a),~l&&p[l].d(),pe(f),pe(y),x=!1,pn(_)}}}function Ys(t){let e,n,r,i,o;return n=new Ls({}),{c(){e=H("button"),ue(n.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{class:!0});var s=B(e);fe(n.$$.fragment,s),s.forEach(w),this.h()},h(){N(e,"class","mx-2")},m(a,s){D(a,e,s),de(n,e,null),r=!0,i||(o=Ue(e,"click",ce.controls.play),i=!0)},i(a){r||(T(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&w(e),pe(n),i=!1,o()}}}function Ks(t){let e,n,r,i,o;return n=new Bs({}),{c(){e=H("button"),ue(n.$$.fragment),this.h()},l(a){e=z(a,"BUTTON",{class:!0});var s=B(e);fe(n.$$.fragment,s),s.forEach(w),this.h()},h(){N(e,"class","mx-2")},m(a,s){D(a,e,s),de(n,e,null),r=!0,i||(o=Ue(e,"click",ce.controls.pause),i=!0)},i(a){r||(T(n.$$.fragment,a),r=!0)},o(a){$(n.$$.fragment,a),r=!1},d(a){a&&w(e),pe(n),i=!1,o()}}}function Xs(t){let e,n,r=t[0]&&Yr(t);return{c(){r&&r.c(),e=j()},l(i){r&&r.l(i),e=j()},m(i,o){r&&r.m(i,o),D(i,e,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&T(r,1)):(r=Yr(i),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ke(),$(r,1,1,()=>{r=null}),Ee())},i(i){n||(T(r),n=!0)},o(i){$(r),n=!1},d(i){i&&w(e),r&&r.d(i)}}}function Js(t,e,n){let r,i;return ut(t,ce,o=>n(0,i=o)),t.$$.update=()=>{t.$$.dirty&1&&n(1,r=i?i.mode==xe.PLAYING:!1)},[i,r]}class Qs extends me{constructor(e){super(),ge(this,e,Js,Xs,ve,{})}}function Kr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Xr(t){let e,n,r="TURN",i,o,a=t[0].frame.turn+"",s,l,u,c=he(t[1]),d=[];for(let f=0;f<c.length;f+=1)d[f]=Jr(Kr(t,c,f));return{c(){e=H("div"),n=H("div"),n.textContent=r,i=oe(),o=H("div"),s=Te(a),l=oe();for(let f=0;f<d.length;f+=1)d[f].c();u=j(),this.h()},l(f){e=z(f,"DIV",{class:!0});var m=B(e);n=z(m,"DIV",{class:!0,"data-svelte-h":!0}),nt(n)!=="svelte-vv9rz3"&&(n.textContent=r),i=ae(m),o=z(m,"DIV",{class:!0});var b=B(o);s=Oe(b,a),b.forEach(w),m.forEach(w),l=ae(f);for(let y=0;y<d.length;y+=1)d[y].l(f);u=j(),this.h()},h(){N(n,"class","basis-1/2 text-right"),N(o,"class","basis-1/2 pl-2"),N(e,"class","flex flex-row font-bold text-lg")},m(f,m){D(f,e,m),O(e,n),O(e,i),O(e,o),O(o,s),D(f,l,m);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(f,m);D(f,u,m)},p(f,m){if(m&1&&a!==(a=f[0].frame.turn+"")&&Be(s,a),m&30){c=he(f[1]);let b;for(b=0;b<c.length;b+=1){const y=Kr(f,c,b);d[b]?d[b].p(y,m):(d[b]=Jr(y),d[b].c(),d[b].m(u.parentNode,u))}for(;b<d.length;b+=1)d[b].d(1);d.length=c.length}},d(f){f&&(w(e),w(l),w(u)),je(d,f)}}}function Zs(t){let e,n,r=t[7].health+"",i;return{c(){e=H("div"),n=H("div"),i=Te(r),this.h()},l(o){e=z(o,"DIV",{class:!0});var a=B(e);n=z(a,"DIV",{class:!0,style:!0});var s=B(n);i=Oe(s,r),s.forEach(w),a.forEach(w),this.h()},h(){N(n,"class","transition-all h-full rounded-full text-white ps-2"),Et(n,"background",t[7].color),Et(n,"width",t[7].health+"%"),N(e,"class","text-outline w-full h-full rounded-full bg-neutral-200 dark:bg-neutral-800 svelte-ci2jec")},m(o,a){D(o,e,a),O(e,n),O(n,i)},p(o,a){a&2&&r!==(r=o[7].health+"")&&Be(i,r),a&2&&Et(n,"background",o[7].color),a&2&&Et(n,"width",o[7].health+"%")},d(o){o&&w(e)}}}function el(t){let e,n=t[3](t[7].elimination)+"",r;return{c(){e=H("p"),r=Te(n)},l(i){e=z(i,"P",{});var o=B(e);r=Oe(o,n),o.forEach(w)},m(i,o){D(i,e,o),O(e,r)},p(i,o){o&2&&n!==(n=i[3](i[7].elimination)+"")&&Be(r,n)},d(i){i&&w(e)}}}function Jr(t){let e,n,r,i=t[7].name+"",o,a,s,l=t[7].length+"",u,c,d,f,m,b=t[7].author+"",y,h,x,_=t[7].latency?`${t[7].latency}ms`:"",C,p,P,g,v,E;function S(U,V){return U[7].elimination?el:Zs}let I=S(t),A=I(t);function q(){return t[5](t[7])}return{c(){e=H("div"),n=H("div"),r=H("p"),o=Te(i),a=oe(),s=H("p"),u=Te(l),c=oe(),d=H("div"),f=H("p"),m=Te("by "),y=Te(b),h=oe(),x=H("p"),C=Te(_),p=oe(),P=H("div"),A.c(),g=oe(),this.h()},l(U){e=z(U,"DIV",{class:!0,role:!0});var V=B(e);n=z(V,"DIV",{class:!0});var se=B(n);r=z(se,"P",{class:!0});var ie=B(r);o=Oe(ie,i),ie.forEach(w),a=ae(se),s=z(se,"P",{class:!0});var K=B(s);u=Oe(K,l),K.forEach(w),se.forEach(w),c=ae(V),d=z(V,"DIV",{class:!0});var X=B(d);f=z(X,"P",{class:!0});var J=B(f);m=Oe(J,"by "),y=Oe(J,b),J.forEach(w),h=ae(X),x=z(X,"P",{class:!0});var ye=B(x);C=Oe(ye,_),ye.forEach(w),X.forEach(w),p=ae(V),P=z(V,"DIV",{class:!0});var R=B(P);A.l(R),R.forEach(w),g=ae(V),V.forEach(w),this.h()},h(){N(r,"class","grow truncate"),N(s,"class","ps-4 text-right"),N(n,"class","flex flex-row font-bold"),N(f,"class","grow truncate"),N(x,"class","text-right"),N(d,"class","flex flex-row text-xs"),N(P,"class","h-4 text-xs mt-1"),N(e,"class","p-2 cursor-pointer rounded-sm border-solid border-2 border-transparent hover:border-neutral-500 hover:bg-neutral-200 dark:hover:bg-neutral-800 svelte-ci2jec"),N(e,"role","presentation"),ct(e,"eliminated",t[7].isEliminated),ct(e,"highlighted",t[7].id==t[2])},m(U,V){D(U,e,V),O(e,n),O(n,r),O(r,o),O(n,a),O(n,s),O(s,u),O(e,c),O(e,d),O(d,f),O(f,m),O(f,y),O(d,h),O(d,x),O(x,C),O(e,p),O(e,P),A.m(P,null),O(e,g),v||(E=Ue(e,"click",q),v=!0)},p(U,V){t=U,V&2&&i!==(i=t[7].name+"")&&Be(o,i),V&2&&l!==(l=t[7].length+"")&&Be(u,l),V&2&&b!==(b=t[7].author+"")&&Be(y,b),V&2&&_!==(_=t[7].latency?`${t[7].latency}ms`:"")&&Be(C,_),I===(I=S(t))&&A?A.p(t,V):(A.d(1),A=I(t),A&&(A.c(),A.m(P,null))),V&2&&ct(e,"eliminated",t[7].isEliminated),V&6&&ct(e,"highlighted",t[7].id==t[2])},d(U){U&&w(e),A.d(),v=!1,E()}}}function tl(t){let e,n=t[0]&&Xr(t);return{c(){n&&n.c(),e=j()},l(r){n&&n.l(r),e=j()},m(r,i){n&&n.m(r,i),D(r,e,i)},p(r,[i]){r[0]?n?n.p(r,i):(n=Xr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:L,o:L,d(r){r&&w(e),n&&n.d(r)}}}function nl(t,e,n){let r,i,o;ut(t,ln,c=>n(2,i=c)),ut(t,ce,c=>n(0,o=c));function a(c){if(o){for(let d=0;d<o.frame.snakes.length;d++)if(o.frame.snakes[d].id==c)return o.frame.snakes[d].name}return"UNKNOWN"}function s(c){switch(c.cause){case"snake-collision":return`Collided with body of ${a(c.by)} on Turn ${c.turn}`;case"snake-self-collision":return`Collided with itself on Turn ${c.turn}`;case"out-of-health":return`Ran out of health on Turn ${c.turn}`;case"hazard":return`Eliminated by hazard on Turn ${c.turn}`;case"head-collision":return`Lost head-to-head with ${a(c.by)} on Turn ${c.turn}`;case"wall-collision":return`Moved out of bounds on Turn ${c.turn}`;default:return c.cause}}function l(c){i==c?Wn(ln,i=null,i):Wn(ln,i=c,i)}const u=c=>l(c.id);return t.$$.update=()=>{t.$$.dirty&1&&n(1,r=o?[...o.frame.snakes].sort((c,d)=>c.isEliminated!=d.isEliminated?c.isEliminated?1:-1:c.name.toLowerCase().localeCompare(d.name.toLowerCase())):[])},[o,r,i,s,l,u]}class rl extends me{constructor(e){super(),ge(this,e,nl,tl,ve,{})}}function il(t){let e,n,r='<p class="font-bold col-span-2 mb-2">Keyboard Shortcuts</p> <p>Play/Pause</p> <p class="text-right"><span class="hotkey svelte-uj821z">Space</span> <span class="hotkey svelte-uj821z">s</span> <span class="hotkey svelte-uj821z">k</span></p> <p>Next Turn</p> <p class="text-right"><span class="hotkey svelte-uj821z"></span> <span class="hotkey svelte-uj821z">d</span> <span class="hotkey svelte-uj821z">l</span></p> <p>Previous Turn</p> <p class="text-right"><span class="hotkey svelte-uj821z"></span> <span class="hotkey svelte-uj821z">a</span> <span class="hotkey svelte-uj821z">j</span></p> <p>Next Elimination</p> <p class="text-right"><span class="hotkey svelte-uj821z">e</span></p> <p>Previous Elimination</p> <p class="text-right"><span class="hotkey svelte-uj821z">q</span></p> <p>Jump to Start</p> <p class="text-right"><span class="hotkey svelte-uj821z">r</span></p> <p>Jump to End</p> <p class="text-right"><span class="hotkey svelte-uj821z">t</span></p> <p>Settings</p> <p class="text-right"><span class="hotkey svelte-uj821z">,</span></p>';return{c(){e=H("template"),n=H("div"),n.innerHTML=r,this.h()},l(i){e=z(i,"TEMPLATE",{id:!0});var o=B(e.content);n=z(o,"DIV",{class:!0,"data-svelte-h":!0}),nt(n)!=="svelte-1w5n10o"&&(n.innerHTML=r),o.forEach(w),this.h()},h(){N(n,"class","grid grid-cols-2 gap-x-2 gap-y-1 p-2"),N(e,"id",t[0])},m(i,o){D(i,e,o),O(e.content,n)},p(i,[o]){o&1&&N(e,"id",i[0])},i:L,o:L,d(i){i&&w(e)}}}function ol(t,e,n){let{id:r}=e;return t.$$set=i=>{"id"in i&&n(0,r=i.id)},[r]}class al extends me{constructor(e){super(),ge(this,e,ol,il,ve,{id:0})}}function sl(t){let e,n,r,i="Playback Settings",o,a,s="autoplay:",l,u,c=t[1].autoplay+"",d,f,m,b="fps:",y,h,x=t[1].fps+"",_,C,p,P="showCoords:",g,v,E=t[1].showCoords+"",S,I,A,q="theme:",U,V,se=t[1].theme+"",ie;return{c(){e=H("template"),n=H("div"),r=H("p"),r.textContent=i,o=oe(),a=H("p"),a.textContent=s,l=oe(),u=H("p"),d=Te(c),f=oe(),m=H("p"),m.textContent=b,y=oe(),h=H("p"),_=Te(x),C=oe(),p=H("p"),p.textContent=P,g=oe(),v=H("p"),S=Te(E),I=oe(),A=H("p"),A.textContent=q,U=oe(),V=H("p"),ie=Te(se),this.h()},l(K){e=z(K,"TEMPLATE",{id:!0});var X=B(e.content);n=z(X,"DIV",{class:!0});var J=B(n);r=z(J,"P",{class:!0,"data-svelte-h":!0}),nt(r)!=="svelte-518p0o"&&(r.textContent=i),o=ae(J),a=z(J,"P",{"data-svelte-h":!0}),nt(a)!=="svelte-156rce1"&&(a.textContent=s),l=ae(J),u=z(J,"P",{class:!0});var ye=B(u);d=Oe(ye,c),ye.forEach(w),f=ae(J),m=z(J,"P",{"data-svelte-h":!0}),nt(m)!=="svelte-77y4b1"&&(m.textContent=b),y=ae(J),h=z(J,"P",{class:!0});var R=B(h);_=Oe(R,x),R.forEach(w),C=ae(J),p=z(J,"P",{"data-svelte-h":!0}),nt(p)!=="svelte-1u8g0an"&&(p.textContent=P),g=ae(J),v=z(J,"P",{class:!0});var W=B(v);S=Oe(W,E),W.forEach(w),I=ae(J),A=z(J,"P",{"data-svelte-h":!0}),nt(A)!=="svelte-1wuyerf"&&(A.textContent=q),U=ae(J),V=z(J,"P",{class:!0});var Y=B(V);ie=Oe(Y,se),Y.forEach(w),J.forEach(w),X.forEach(w),this.h()},h(){N(r,"class","font-bold col-span-2 mb-2"),N(u,"class","text-right"),N(h,"class","text-right"),N(v,"class","text-right"),N(V,"class","text-right"),N(n,"class","grid grid-cols-2 gap-x-2 gap-y-1 p-2"),N(e,"id",t[0])},m(K,X){D(K,e,X),O(e.content,n),O(n,r),O(n,o),O(n,a),O(n,l),O(n,u),O(u,d),O(n,f),O(n,m),O(n,y),O(n,h),O(h,_),O(n,C),O(n,p),O(n,g),O(n,v),O(v,S),O(n,I),O(n,A),O(n,U),O(n,V),O(V,ie)},p(K,[X]){X&2&&c!==(c=K[1].autoplay+"")&&Be(d,c),X&2&&x!==(x=K[1].fps+"")&&Be(_,x),X&2&&E!==(E=K[1].showCoords+"")&&Be(S,E),X&2&&se!==(se=K[1].theme+"")&&Be(ie,se),X&1&&N(e,"id",K[0])},i:L,o:L,d(K){K&&w(e)}}}function ll(t,e,n){let{id:r}=e,{settings:i}=e;return t.$$set=o=>{"id"in o&&n(0,r=o.id),"settings"in o&&n(1,i=o.settings)},[r,i]}class cl extends me{constructor(e){super(),ge(this,e,ll,sl,ve,{id:0,settings:1})}}function Qr(t){let e,n,r;return{c(){e=H("input"),this.h()},l(i){e=z(i,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),this.h()},h(){N(e,"class","w-full cursor-pointer disabled:cursor-not-allowed"),N(e,"type","range"),N(e,"min",Si),N(e,"max",t[2]),N(e,"step",fl),e.disabled=t[0]},m(i,o){D(i,e,o),qn(e,t[3]),n||(r=[Ue(e,"focus",dl),Ue(e,"input",t[4]),Ue(e,"change",t[5]),Ue(e,"input",t[5])],n=!0)},p(i,o){o&4&&N(e,"max",i[2]),o&1&&(e.disabled=i[0]),o&8&&qn(e,i[3])},d(i){i&&w(e),n=!1,pn(r)}}}function ul(t){let e,n=t[1]&&Qr(t);return{c(){n&&n.c(),e=j()},l(r){n&&n.l(r),e=j()},m(r,i){n&&n.m(r,i),D(r,e,i)},p(r,[i]){r[1]?n?n.p(r,i):(n=Qr(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:L,o:L,d(r){r&&w(e),n&&n.d(r)}}}let Si=0,fl=1;function dl(t){t.target&&t.target.blur()}function pl(t,e,n){let r;ut(t,ce,u=>n(1,r=u));let i=10,o=!0,a=Si;function s(u){if(u.target){const c=parseInt(u.target.value);ce==null||ce.controls.jumpToFrame(c)}}function l(){a=Hi(this.value),n(3,a),n(0,o),n(1,r)}return t.$$.update=()=>{t.$$.dirty&3&&o&&r&&r.finalFrame&&(n(0,o=!1),n(2,i=r.finalFrame.turn)),t.$$.dirty&3&&!o&&r&&n(3,a=r.frame.turn)},[o,r,i,a,s,l]}class hl extends me{constructor(e){super(),ge(this,e,pl,ul,ve,{})}}function vl(t){let e,n,r='<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93c.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204s.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78c-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107c-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93c-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204s-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78c.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107s.71-.505.78-.929z"/><path d="M15 12a3 3 0 1 1-6 0a3 3 0 0 1 6 0"/></g>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function ml(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class gl extends me{constructor(e){super(),ge(this,e,ml,vl,ve,{})}}function _l(t){let e,n,r='<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.879 7.519c1.172-1.025 3.071-1.025 4.243 0c1.171 1.025 1.171 2.687 0 3.712q-.308.268-.67.442c-.746.361-1.452.999-1.452 1.827v.75M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0m-9 5.25h.008v.008H12z"/>',i=[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},t[0]],o={};for(let a=0;a<i.length;a+=1)o=te(o,i[a]);return{c(){e=_e("svg"),n=new Ke(!0),this.h()},l(a){e=be(a,"svg",{viewBox:!0,width:!0,height:!0});var s=B(e);n=Xe(s,!0),s.forEach(w),this.h()},h(){n.a=null,ne(e,o)},m(a,s){D(a,e,s),n.m(r,e)},p(a,[s]){ne(e,o=Se(i,[{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},s&1&&a[0]]))},i:L,o:L,d(a){a&&w(e)}}}function bl(t,e,n){return t.$$set=r=>{n(0,e=te(te({},e),Pe(r)))},e=Pe(e),[e]}class yl extends me{constructor(e){super(),ge(this,e,bl,_l,ve,{})}}const{window:lt}=Ui;function wl(t){let e,n="Loading game...";return{c(){e=H("p"),e.textContent=n,this.h()},l(r){e=z(r,"P",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-8ixt8a"&&(e.textContent=n),this.h()},h(){N(e,"class","p-4 text-lg text-center")},m(r,i){D(r,e,i)},p:L,i:L,o:L,d(r){r&&w(e)}}}function kl(t){let e,n,r,i,o,a,s,l,u,c,d;e=new al({props:{id:t[4].templateId}}),r=new cl({props:{id:t[5].templateId,settings:t[0]}});let f=t[0].title&&Zr(t);l=new Ss({props:{showCoordinates:t[0].showCoords}});let m=t[0].showControls&&ei(t),b=t[0].showScoreboard&&ni();return{c(){ue(e.$$.fragment),n=oe(),ue(r.$$.fragment),i=oe(),o=H("div"),a=H("div"),f&&f.c(),s=oe(),ue(l.$$.fragment),u=oe(),m&&m.c(),c=oe(),b&&b.c(),this.h()},l(y){fe(e.$$.fragment,y),n=ae(y),fe(r.$$.fragment,y),i=ae(y),o=z(y,"DIV",{class:!0});var h=B(o);a=z(h,"DIV",{class:!0});var x=B(a);f&&f.l(x),s=ae(x),fe(l.$$.fragment,x),u=ae(x),m&&m.l(x),x.forEach(w),c=ae(h),b&&b.l(h),h.forEach(w),this.h()},h(){N(a,"class","flex flex-col grow"),N(o,"class","w-full h-full flex flex-col md:flex-row")},m(y,h){de(e,y,h),D(y,n,h),de(r,y,h),D(y,i,h),D(y,o,h),O(o,a),f&&f.m(a,null),O(a,s),de(l,a,null),O(a,u),m&&m.m(a,null),O(o,c),b&&b.m(o,null),d=!0},p(y,h){const x={};h&1&&(x.settings=y[0]),r.$set(x),y[0].title?f?f.p(y,h):(f=Zr(y),f.c(),f.m(a,s)):f&&(f.d(1),f=null);const _={};h&1&&(_.showCoordinates=y[0].showCoords),l.$set(_),y[0].showControls?m?(m.p(y,h),h&1&&T(m,1)):(m=ei(y),m.c(),T(m,1),m.m(a,null)):m&&(ke(),$(m,1,1,()=>{m=null}),Ee()),y[0].showScoreboard?b?h&1&&T(b,1):(b=ni(),b.c(),T(b,1),b.m(o,null)):b&&(ke(),$(b,1,1,()=>{b=null}),Ee())},i(y){d||(T(e.$$.fragment,y),T(r.$$.fragment,y),T(l.$$.fragment,y),T(m),T(b),d=!0)},o(y){$(e.$$.fragment,y),$(r.$$.fragment,y),$(l.$$.fragment,y),$(m),$(b),d=!1},d(y){y&&(w(n),w(i),w(o)),pe(e,y),pe(r,y),f&&f.d(),pe(l),m&&m.d(),b&&b.d()}}}function El(t){let e,n;return{c(){e=H("p"),n=Te(t[2]),this.h()},l(r){e=z(r,"P",{class:!0});var i=B(e);n=Oe(i,t[2]),i.forEach(w),this.h()},h(){N(e,"class","p-4 font-bold text-lg text-center text-red-500")},m(r,i){D(r,e,i),O(e,n)},p(r,i){i&4&&Be(n,r[2])},i:L,o:L,d(r){r&&w(e)}}}function xl(t){let e,n="To display a game you need to specify the ID in the URL.",r,i,o="https://board.battlesnake.com?game=<GAME_ID>",a;return{c(){e=H("p"),e.textContent=n,r=oe(),i=H("p"),a=Te(o),this.h()},l(s){e=z(s,"P",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-1fmsh37"&&(e.textContent=n),r=ae(s),i=z(s,"P",{class:!0});var l=B(i);a=Oe(l,o),l.forEach(w),this.h()},h(){N(e,"class","p-4 font-bold text-lg text-center"),N(i,"class","italic")},m(s,l){D(s,e,l),D(s,r,l),D(s,i,l),O(i,a)},p:L,i:L,o:L,d(s){s&&(w(e),w(r),w(i))}}}function Zr(t){let e,n=t[0].title+"",r;return{c(){e=H("h1"),r=Te(n),this.h()},l(i){e=z(i,"H1",{class:!0});var o=B(e);r=Oe(o,n),o.forEach(w),this.h()},h(){N(e,"class","text-center font-bold pt-2 text-lg")},m(i,o){D(i,e,o),O(e,r)},p(i,o){o&1&&n!==(n=i[0].title+"")&&Be(r,n)},d(i){i&&w(e)}}}function ei(t){let e,n,r,i,o,a,s,l,u,c,d,f,m,b=t[0].showScrubber&&ti();return i=new yl({}),a=new Qs({}),c=new gl({}),{c(){b&&b.c(),e=oe(),n=H("div"),r=H("div"),ue(i.$$.fragment),o=oe(),ue(a.$$.fragment),s=oe(),l=H("div"),u=H("a"),ue(c.$$.fragment),this.h()},l(y){b&&b.l(y),e=ae(y),n=z(y,"DIV",{class:!0});var h=B(n);r=z(h,"DIV",{});var x=B(r);fe(i.$$.fragment,x),x.forEach(w),o=ae(h),fe(a.$$.fragment,h),s=ae(h),l=z(h,"DIV",{});var _=B(l);u=z(_,"A",{href:!0});var C=B(u);fe(c.$$.fragment,C),C.forEach(w),_.forEach(w),h.forEach(w),this.h()},h(){N(u,"href","/settings"),N(n,"class","flex justify-evenly text-xl py-2 px-6")},m(y,h){b&&b.m(y,h),D(y,e,h),D(y,n,h),O(n,r),de(i,r,null),O(n,o),de(a,n,null),O(n,s),O(n,l),O(l,u),de(c,u,null),d=!0,f||(m=[Fe(fr.call(null,r,t[4])),Fe(fr.call(null,l,t[5]))],f=!0)},p(y,h){y[0].showScrubber?b?h&1&&T(b,1):(b=ti(),b.c(),T(b,1),b.m(e.parentNode,e)):b&&(ke(),$(b,1,1,()=>{b=null}),Ee())},i(y){d||(T(b),T(i.$$.fragment,y),T(a.$$.fragment,y),T(c.$$.fragment,y),d=!0)},o(y){$(b),$(i.$$.fragment,y),$(a.$$.fragment,y),$(c.$$.fragment,y),d=!1},d(y){y&&(w(e),w(n)),b&&b.d(y),pe(i),pe(a),pe(c),f=!1,pn(m)}}}function ti(t){let e,n,r;return n=new hl({}),{c(){e=H("div"),ue(n.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var o=B(e);fe(n.$$.fragment,o),o.forEach(w),this.h()},h(){N(e,"class","w-full px-[7.5%]")},m(i,o){D(i,e,o),de(n,e,null),r=!0},i(i){r||(T(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&w(e),pe(n)}}}function ni(t){let e,n,r;return n=new rl({}),{c(){e=H("div"),ue(n.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var o=B(e);fe(n.$$.fragment,o),o.forEach(w),this.h()},h(){N(e,"class","basis-full md:basis-[45%] order-first p-2 md:order-last")},m(i,o){D(i,e,o),de(n,e,null),r=!0},i(i){r||(T(n.$$.fragment,i),r=!0)},o(i){$(n.$$.fragment,i),r=!1},d(i){i&&w(e),pe(n)}}}function Cl(t){let e,n,r,i,o,a;const s=[xl,El,kl,wl],l=[];function u(c,d){return c[1]?0:c[2]?1:c[3]?2:3}return n=u(t),r=l[n]=s[n](t),{c(){e=H("div"),r.c(),this.h()},l(c){e=z(c,"DIV",{class:!0});var d=B(e);r.l(d),d.forEach(w),this.h()},h(){N(e,"class","h-full w-full flex flex-col items-center justify-center")},m(c,d){D(c,e,d),l[n].m(e,null),i=!0,o||(a=[Fe(st.call(null,lt,{keys:["space","s","k"],f:ce.controls.togglePlayPause})),Fe(st.call(null,lt,{keys:["left","a","j"],f:ce.controls.prevFrame})),Fe(st.call(null,lt,{keys:["right","d","l"],f:ce.controls.nextFrame})),Fe(st.call(null,lt,{keys:["q"],f:ce.controls.prevEliminationFrame})),Fe(st.call(null,lt,{keys:["e"],f:ce.controls.nextEliminationFrame})),Fe(st.call(null,lt,{keys:["r"],f:ce.controls.firstFrame})),Fe(st.call(null,lt,{keys:["t"],f:ce.controls.lastFrame})),Fe(st.call(null,lt,{keys:[","],f:t[6]})),Fe(Ca.call(null,e,{f:t[7]}))],o=!0)},p(c,[d]){let f=n;n=u(c),n===f?l[n].p(c,d):(ke(),$(l[f],1,1,()=>{l[f]=null}),Ee(),r=l[n],r?r.p(c,d):(r=l[n]=s[n](c),r.c()),T(r,1),r.m(e,null))},i(c){i||(T(r),i=!0)},o(c){$(r),i=!1},d(c){c&&w(e),l[n].d(),o=!1,pn(a)}}}function Tl(t,e,n){let r,i;ut(t,Un,d=>n(2,r=d)),ut(t,ce,d=>n(3,i=d));const o={templateId:"hotkeysTooltip",tippyProps:{arrow:!1,placement:"top-start"}},a={templateId:"settingsTooltip",tippyProps:{arrow:!1,placement:"top-end"}};Wi(async()=>{ce.controls.pause(),ce.reset()});function s(){Vi("/settings")}function l(d,f){Va(d,f)}let u=Mn(),c=!0;return ji(()=>{const d=new URL(window.location.href);n(0,u=zi(d)),Fi(u.theme),u.game.length>0&&u.engine.length>0&&(n(1,c=!1),ce.load(fetch,u),Wa())}),[u,c,r,i,o,a,s,l]}class $l extends me{constructor(e){super(),ge(this,e,Tl,Cl,ve,{})}}export{$l as component};
